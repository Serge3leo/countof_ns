# vim:set sw=4 ts=8 et fileencoding=utf8:
# SPDX-License-Identifier: BSD-2-Clause
# SPDX-FileCopyrightText: 2025 Сергей Леонтьев (leo@sai.msu.ru)

# NVHPC 25.9
#
# HAVE_ZERO_LENGTH_ARRAYS
# HAVE_EMPTY_INITIALIZER
# HAVE_EMPTY_STRUCTURE
# HAVE_TYPEOF
# HAVE___TYPEOF__
# ERROR_ON_NEGATIVE_ARRAY_SIZE
# ERROR_ON_STRUCT_BIT_FIELD
# ERROR_ON_STRUCT_STATIC_ASSERT
# Don't detected ERROR_ON_SIZEOF_POINTER_SUBTRACTION - C99 semantic,
# But not HAVE_VLA (broken), no tests with _COUNTOF_NS_WANT_С11_VLA

[default]
skip = [ "post_check_.*-.*" ]
stable_failure = [
    # countof_ns()
    "pos_cv_array(|_c11)",  # __typeof__() === ttypeof_unqual()
    #"pos_vla(|_(cv|00|0n))",  # VLA without _COUNTOF_NS_WANT_С11_VLA
    "pos_(struct|vla|zla)_n0(|_c11)",  # Zero by zero uncertainty (cases 0/0 != 0)
    #"neg(|_cv|_vla)_ptr_c11(|_0_fail)",  # Does not conform to c11 semantics

    # Comparisons
    "(std_size|ms_countof)-pos.*_zla_0[0n]_cxx",
    ".*-pos_(struct|vla|zla)(|_zla)_[n0]0",  # divide_by_zero
    "(JZMG_ARRAY_LEN|ms_countof)-neg(|_cv|_vla|_zla)_ptr(|_0_fail)",
    "JZMG_ARRAY_LEN-pos_zla_n0_cxx",
    ]
must_not_fpe = [ "std_size-.*" ]
stable_fpe = [
    "(JZMG_ARRAY_LEN|ms_countof)-pos_vla_[n0]0",  # divide_by_zero
    ]
must_not_divide_by_zero_warning = [ "std_size-.*" ]
stable_divide_by_zero_warning = [
    ".*-pos_(struct|vla|zla)(|_zla)_[n0]0",  # divide_by_zero
    ".*-neg_zla_ptr",
    ]

random_warning = [
    "neg_other_c11",  # Does not conform to C11 semantics
    "neg(|_cv|_vla)_ptr_c11",  # Does not conform to C11 semantics
    "long_example_vla_fail",

    ".*-(pos|neg).*",  # Ignore warnings about compassions
    ]
[debug]

[verbose]
must_not_divide_by_zero_warning = [
    "ms_countof-neg_zla_ptr",
    "JZMG_ARRAY_LEN-neg_zla_ptr",
    ]
