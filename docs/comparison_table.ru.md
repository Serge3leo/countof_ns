<!-- vim:set sw=4 ts=8 fileencoding=utf8::Кодировка:UTF-8[АБЁЪЯабёъя])
 SPDX-License-Identifier: BSD-2-Clause
 SPDX-FileCopyrightText: 2025 Сергей Леонтьев (leo@sai.msu.ru)
 -->
# Сравнение методов получения числа элементов массива

## Содержание

- [Ведение](#введение)
- [Стандарт языка C](#стандарт-языка-c)
  - [`countof_ns()`](#countof_ns)
  - [Сравнения](#сравнения)
- [Расширения C](#расширения-c)
  - [`countof_ns()`](#countof_ns-1)
  - [Сравнения](#сравнения-1)
- [Стандарт языка C++](#стандарт-языка-c-1)
  - [`countof_ns()`](#countof_ns-2)
  - [Сравнения](#сравнения-2)
- [Расширения C++](#расширения-c-1)
  - [`countof_ns()`](#countof_ns-3)
  - [Сравнения](#сравнения-3)
- [Определения](#определения)
  - [Методы](#методы)
  - [Тесты](#тесты)
  - [Результаты](#результаты)
  - [Версии компиляторов и поддерживаемые расширения](#версии-компиляторов-и-поддерживаемые-расширения)
    - [Описание расширений](#описание-расширений)
  - [Compiler ID](#compiler-id)
- [Обсуждение](#обсуждение)

## Введение

Данные таблицы являются визуализацией ожидаемых результатов модульных тестов:
- [`countof_ns_expected`](../tests/unit/countof_ns_expected.cmake);
- [`stdc_countof_expected`](../tests/unit/comparisons/stdc_countof_expected.cmake);
- [`std_size_expected`](../tests/unit/comparisons/std_size_expected.cmake);
- [`ms_countof_expected`](../tests/unit/comparisons/ms_countof_expected.cmake);
- [`JZMG_ARRAY_LEN_expected`](../tests/unit/comparisons/JZMG_ARRAY_LEN_expected.cmake);
- [`LNX_ARRAY_SIZE_expected`](../tests/unit/comparisons/LNX_ARRAY_SIZE_expected.cmake);
- [`ALX_COUNTOF_expected`](../tests/unit/comparisons/ALX_COUNTOF_expected.cmake).

## Стандарт языка C
### `countof_ns()`
<!-- span: "c" keys: "Method", "ID" -->

| Method                    | ID        | `cntfn_dflt`       | `pos_array`     | `pos_cv_array`       | `neg_ptr`          | `neg_cv_ptr`       | `neg_other`     | `pos_vla`     | `pos_vla_cv`          | `neg_vla_ptr`      | ID        | `cntfn_pos` | `cntfn_pos_cv` | `cntfn_neg_bltn` | `cntfn_neg_size_bltn` | `cntfn_neg_c_bltn` | `cntfn_neg_cv_bltn` | `cntfn_neg_v_bltn` | `pos__selftest`     | `neg__selftest`     |
| ------------------------- | --------- | ------------------ | --------------- | -------------------- | ------------------ | ------------------ | --------------- | ------------- | --------------------- | ------------------ | --------- | ----------- | -------------- | ---------------- | --------------------- | ------------------ | ------------------- | ------------------ | ------------------- | ------------------- |
| &nbsp;                    | e.g.:     |                    | `array[N]`      | `const array[N]`<br> | `*ptr`             | `const *ptr`<br>   | other<br>       | `VLA[n]`<br>  | `volatile VLA[n]`<br> | `(*VLA)[n]`<br>    | &nbsp;    |             |                |                  |                       |                    |                     |                    |                     |                     |
|                           |           |                    |                 |                      |                    |                    |                 |               |                       |                    |           |             |                |                  |                       |                    |                     |                    |                     |                     |
| countof_ns<sup>bltn</sup> | Clang     | ✅                  | ✅               | ✅                    | ✅                  | ✅                  | ✅               | ✅             | ✅                     | ✅                  | Clang     |             |                |                  |                       |                    |                     |                    | ✅                   | ✅                   |
|                           | GNU       | ✅                  | ✅               | ✅                    | ✅                  | ✅                  | ✅               | ✅             | ✅                     | ✅                  | GNU       |             |                |                  |                       |                    |                     |                    | ✅                   | ✅                   |
|                           | Intel     | ✅                  | ✅               | ✅                    | ✅                  | ✅                  | ✅               | ✅             | ✅                     | ✅                  | Intel     |             |                |                  |                       |                    |                     |                    | ✅                   | ✅                   |
|                           | IntelLLVM | ✅                  | ✅               | ✅                    | ✅                  | ✅                  | ✅               | ✅             | ✅                     | ✅                  | IntelLLVM |             |                |                  |                       |                    |                     |                    | ✅                   | ✅                   |
|                           | LCC       | ✅                  | ✅               | ✅                    | ✅                  | ✅                  | ✅               | ✅             | ✅                     | ✅                  | LCC       |             |                |                  |                       |                    |                     |                    | ✅                   | ✅                   |
|                           | MSVC      |                    | n/a             | n/a                  | n/a                | n/a                | n/a             | n/a           | n/a                   | n/a                | MSVC      |             |                |                  |                       |                    |                     |                    | n/a                 | n/a                 |
|                           | NVHPC     | ✅                  | ✅               | ✅                    | ✅                  | ✅                  | ✅               | ✅             | ✅                     | ✅                  | NVHPC     |             |                |                  |                       |                    |                     |                    | ✅                   | ✅                   |
|                           | Pelles    |                    |                 |                      |                    |                    |                 |               |                       |                    | PellesC   |             |                |                  |                       |                    |                     |                    |                     |                     |
|                           | PGI       |                    |                 |                      |                    |                    |                 |               |                       |                    | PGI       |             |                |                  |                       |                    |                     |                    |                     |                     |
|                           | SunPro    | ⚠️<sub>TODO</sub>  | ✅               | ✅                    | ✅                  | ✅                  | ✅               | ✅             | ✅                     | ✅                  | SunPro    |             |                |                  |                       |                    |                     |                    | ✅                   | ✅                   |
|                           |           |                    |                 |                      |                    |                    |                 |               |                       |                    |           |             |                |                  |                       |                    |                     |                    |                     |                     |
| countof_ns<sup>c11</sup>  | Clang     |                    | ✅               | ✅                    | ✅                  | ✅                  | ✅               | ✅             | ✅                     | ✅                  | Clang     |             |                |                  |                       |                    |                     |                    | ✅                   | ✅                   |
|                           | GNU       |                    | ✅               | ✅                    | ✅                  | ✅                  | ✅               | ✅             | ✅                     | ✅                  | GNU       |             |                |                  |                       |                    |                     |                    | ✅                   | ✅                   |
|                           | Intel     |                    | ✅               | ✅                    | ⚠️❌<sub>-Inv</sub> | ⚠️❌<sub>-Inv</sub> | ✅               | ✅             | ✅                     | ⚠️❌<sub>-Inv</sub> | Intel     |             |                |                  |                       |                    |                     |                    | ✅                   | ✅                   |
|                           | IntelLLVM |                    | ✅               | ✅                    | ✅                  | ✅                  | ✅               | ✅             | ✅                     | ✅                  | IntelLLVM |             |                |                  |                       |                    |                     |                    | ✅                   | ✅                   |
|                           | LCC       |                    | ✅               | ✅                    | ⚠️❌<sub>-Inv</sub> | ⚠️❌<sub>-Inv</sub> | ✅               | ✅             | ✅                     | ⚠️❌<sub>-Inv</sub> | LCC       |             |                |                  |                       |                    |                     |                    | ✅                   | ✅                   |
|                           | MSVC      |                    | n/a             | n/a                  | n/a                | n/a                | n/a             | n/a           | n/a                   | n/a                | MSVC      |             |                |                  |                       |                    |                     |                    | n/a                 | n/a                 |
|                           | NVHPC     |                    | ✅               | ✅                    | ⚠️❌<sub>-Inv</sub> | ⚠️❌<sub>-Inv</sub> | ✅               | ✅             | ✅                     | ⚠️❌<sub>-Inv</sub> | NVHPC     |             |                |                  |                       |                    |                     |                    | ✅                   | ✅                   |
|                           | Pelles    | ✅                  |                 |                      |                    |                    |                 |               |                       |                    | PellesC   |             |                |                  |                       |                    |                     |                    |                     |                     |
|                           | PGI       |                    |                 |                      |                    |                    |                 |               |                       |                    | PGI       |             |                |                  |                       |                    |                     |                    |                     |                     |
|                           | SunPro    |                    | ✅               | ✅                    | ⚠️❌<sub>-Inv</sub> | ⚠️❌<sub>-Inv</sub> | ✅               | ✅             | ✅                     | ⚠️❌<sub>-Inv</sub> | SunPro    |             |                |                  |                       |                    |                     |                    | ✅                   | ✅                   |
|                           |           |                    |                 |                      |                    |                    |                 |               |                       |                    |           |             |                |                  |                       |                    |                     |                    |                     |                     |
| countof_ns<sup>gen</sup>  | Clang     |                    | ✅               | ✅                    | ✅                  | ✅                  | ✅               | ❌             | ❌                     | ✅                  | Clang     |             |                |                  |                       |                    |                     |                    | ✅                   | ✅                   |
|                           | GNU       |                    | ✅               | ✅                    | ✅                  | ✅                  | ✅               | ❌             | ❌                     | ✅                  | GNU       |             |                |                  |                       |                    |                     |                    | ✅                   | ✅                   |
|                           | Intel     |                    | ✅               | ✅                    | ✅                  | ✅                  | ✅               | ❌             | ❌                     | ✅                  | Intel     |             |                |                  |                       |                    |                     |                    | ✅                   | ✅                   |
|                           | IntelLLVM |                    | ✅               | ✅                    | ✅                  | ✅                  | ✅               | ❌             | ❌                     | ✅                  | IntelLLVM |             |                |                  |                       |                    |                     |                    | ✅                   | ✅                   |
|                           | LCC       |                    | ✅               | ✅                    | ✅                  | ✅                  | ✅               | ❌             | ❌                     | ✅                  | LCC       |             |                |                  |                       |                    |                     |                    | ✅                   | ✅                   |
|                           | MSVC      | ✅                  | ✅               | ✅                    | ✅                  | ✅                  | ✅               | n/a           | n/a                   | n/a                | MSVC      |             |                |                  |                       |                    |                     |                    | ✅                   | ✅                   |
|                           | NVHPC     |                    | ✅               | ✅                    | ✅                  | ✅                  | ✅               | ❌             | ❌                     | ✅                  | NVHPC     |             |                |                  |                       |                    |                     |                    | ✅                   | ✅                   |
|                           | Pelles    |                    |                 |                      |                    |                    |                 |               |                       |                    | PellesC   |             |                |                  |                       |                    |                     |                    |                     |                     |
|                           | PGI       |                    |                 |                      |                    |                    |                 |               |                       |                    | PGI       |             |                |                  |                       |                    |                     |                    |                     |                     |
|                           | SunPro    | ✅⚠️<sub>TODO</sub> | ✅               | ✅                    | ✅                  | ✅                  | ✅               | ❌             | ❌                     | ✅                  | SunPro    |             |                |                  |                       |                    |                     |                    | ✅                   | ✅                   |
| &nbsp;                    | **Hdrs:** | **`cntfn_dflt`**   | **`pos_array`** | **`pos_cv_array`**   | **`neg_ptr`**      | **`neg_cv_ptr`**   | **`neg_other`** | **`pos_vla`** | **`pos_vla_cv`**      | **`neg_vla_ptr`**  | &nbsp;    |             |                |                  |                       |                    |                     |                    | **`pos__selftest`** | **`neg__selftest`** |
<!-- endspan: "c" -->
### Сравнения
<!-- span: "c" keys: "Method", "ID" -->

| Method         | ID        | `pos_array`       | `pos_cv_array`       | `neg_ptr`          | `neg_cv_ptr`       | `neg_other`     | `pos_vla`     | `pos_vla_cv`          | `neg_vla_ptr`      | ID        | `pos__selftest`     | `neg__selftest`     |
| -------------- | --------- | ----------------- | -------------------- | ------------------ | ------------------ | --------------- | ------------- | --------------------- | ------------------ | --------- | ------------------- | ------------------- |
| &nbsp;         | e.g.:     | `array[N]`        | `const array[N]`<br> | `*ptr`             | `const *ptr`<br>   | other<br>       | `VLA[n]`<br>  | `volatile VLA[n]`<br> | `(*VLA)[n]`<br>    | &nbsp;    |                     |                     |
|                |           |                   |                      |                    |                    |                 |               |                       |                    |           |                     |                     |
| countof        | Clang     | ✅                 | ✅                    | ✅                  | ✅                  | ✅               | ✅             | ✅                     | ✅                  | Clang     | ✅                   | ✅                   |
|                | GNU       | ⚠️<sub>TODO</sub> |                      |                    |                    |                 |               |                       |                    | GNU       |                     |                     |
|                | IntelLLVM | ✅                 | ✅                    | ✅                  | ✅                  | ✅               | ✅             | ✅                     | ✅                  | IntelLLVM | ✅                   | ✅                   |
|                |           |                   |                      |                    |                    |                 |               |                       |                    |           |                     |                     |
| ms_countof     | Clang     | ✅                 | ✅                    | ⚠️❌<sub>-Inv</sub> | ⚠️❌<sub>-Inv</sub> | ✅               | ✅             | ✅                     | ⚠️❌<sub>-Inv</sub> | Clang     | ✅                   | ✅                   |
|                | GNU       | ✅                 | ✅                    | ⚠️❌<sub>-Inv</sub> | ⚠️❌<sub>-Inv</sub> | ✅               | ✅             | ✅                     | ⚠️❌<sub>-Inv</sub> | GNU       | ✅                   | ✅                   |
|                | Intel     | ✅                 | ✅                    | ⚠️❌<sub>-Inv</sub> | ⚠️❌<sub>-Inv</sub> | ✅               | ✅             | ✅                     | ⚠️❌<sub>-Inv</sub> | Intel     | ✅                   | ✅                   |
|                | IntelLLVM | ✅                 | ✅                    | ⚠️❌<sub>-Inv</sub> | ⚠️❌<sub>-Inv</sub> | ✅               | ✅             | ✅                     | ⚠️❌<sub>-Inv</sub> | IntelLLVM | ✅                   | ✅                   |
|                | LCC       | ✅                 | ✅                    | ⚠️❌<sub>-Inv</sub> | ⚠️❌<sub>-Inv</sub> | ✅               | ✅             | ✅                     | ⚠️❌<sub>-Inv</sub> | LCC       | ✅                   | ✅                   |
|                | MSVC      | ✅                 | ✅                    | ⚠️❌<sub>-Inv</sub> | ⚠️❌<sub>-Inv</sub> | ✅               | n/a           | n/a                   | n/a                | MSVC      | ✅                   | ✅                   |
|                | NVHPC     | ✅                 | ✅                    | ⚠️❌<sub>-Inv</sub> | ⚠️❌<sub>-Inv</sub> | ✅               | ✅             | ✅                     | ⚠️❌<sub>-Inv</sub> | NVHPC     | ✅                   | ✅                   |
|                | SunPro    | ✅                 | ✅                    | ⚠️❌<sub>-Inv</sub> | ⚠️❌<sub>-Inv</sub> | ✅               | ✅             | ✅                     | ⚠️❌<sub>-Inv</sub> | SunPro    | ✅                   | ✅                   |
|                |           |                   |                      |                    |                    |                 |               |                       |                    |           |                     |                     |
| JZMG_ARRAY_LEN | Clang     | ✅                 | ✅                    | ✅                  | ✅                  | ✅               | ✅             | ✅                     | ✅                  | Clang     | ✅                   | ✅                   |
|                | GNU       | ✅                 | ✅                    | ✅                  | ✅                  | ✅               | ✅             | ✅                     | ✅                  | GNU       | ✅                   | ✅                   |
|                | Intel     | ✅                 | ✅                    | ⚠️❌<sub>-Inv</sub> | ⚠️❌<sub>-Inv</sub> | ✅               | ✅             | ✅                     | ⚠️❌<sub>-Inv</sub> | Intel     | ✅                   | ✅                   |
|                | IntelLLVM | ✅                 | ✅                    | ✅                  | ✅                  | ✅               | ✅             | ✅                     | ✅                  | IntelLLVM | ✅                   | ✅                   |
|                | LCC       | ✅                 | ✅                    | ⚠️❌<sub>-Inv</sub> | ⚠️❌<sub>-Inv</sub> | ✅               | ✅             | ✅                     | ⚠️❌<sub>-Inv</sub> | LCC       | ✅                   | ✅                   |
|                | MSVC      | ✅                 | ✅                    | ⚠️❌<sub>-Inv</sub> | ⚠️❌<sub>-Inv</sub> | ✅               | ✅             | ✅                     | ⚠️❌<sub>-Inv</sub> | MSVC      | ✅                   | ✅                   |
|                | NVHPC     | ✅                 | ✅                    | ⚠️❌<sub>-Inv</sub> | ⚠️❌<sub>-Inv</sub> | ✅               | ✅             | ✅                     | ⚠️❌<sub>-Inv</sub> | NVHPC     | ✅                   | ✅                   |
|                | SunPro    | ✅                 | ✅                    | ⚠️❌<sub>-Inv</sub> | ⚠️❌<sub>-Inv</sub> | ✅               | ✅             | ✅                     | ⚠️❌<sub>-Inv</sub> | SunPro    | ✅                   | ✅                   |
|                |           |                   |                      |                    |                    |                 |               |                       |                    |           |                     |                     |
| LNX_ARRAY_SIZE | Clang     | ✅                 | ✅                    | ✅                  | ✅                  | ✅               | ✅             | ✅                     | ✅                  | Clang     | ✅                   | ✅                   |
|                | GNU       | ✅                 | ✅                    | ✅                  | ✅                  | ✅               | ✅             | ✅                     | ✅                  | GNU       | ✅                   | ✅                   |
|                | IntelLLVM | ✅                 | ✅                    | ✅                  | ✅                  | ✅               | ✅             | ✅                     | ✅                  | IntelLLVM | ✅                   | ✅                   |
|                | NVHPC     | ✅                 | ✅                    | ✅                  | ✅                  | ✅               | ✅             | ✅                     | ✅                  | NVHPC     | ✅                   | ✅                   |
|                |           |                   |                      |                    |                    |                 |               |                       |                    |           |                     |                     |
| ALX_COUNTOF    | Clang     | ✅                 | ✅                    | ✅                  | ✅                  | ✅               | ✅             | ✅                     | ✅                  | Clang     | ✅                   | ✅                   |
|                | GNU       | ✅                 | ✅                    | ✅                  | ✅                  | ✅               | ✅             | ✅                     | ✅                  | GNU       | ✅                   | ✅                   |
|                | IntelLLVM | ✅                 | ✅                    | ✅                  | ✅                  | ✅               | ✅             | ✅                     | ✅                  | IntelLLVM | ✅                   | ✅                   |
|                | NVHPC     | ✅                 | ✅                    | ✅                  | ✅                  | ✅               | ✅             | ✅                     | ✅                  | NVHPC     | ✅                   | ✅                   |
| &nbsp;         | **Hdrs:** | **`pos_array`**   | **`pos_cv_array`**   | **`neg_ptr`**      | **`neg_cv_ptr`**   | **`neg_other`** | **`pos_vla`** | **`pos_vla_cv`**      | **`neg_vla_ptr`**  | &nbsp;    | **`pos__selftest`** | **`neg__selftest`** |
<!-- endspan: "c" -->
## Расширения C
### `countof_ns()`
<!-- span: "c" keys: "Method", "ID" -->

| Method                    | ID        | `neg_alone_ptr`     | `pos_zla_0n`     | `pos_zla_00`<br>`pos_zla_alone_00`<br>`pos_zla_struct_00`     | `pos_zla_n0`<br>`pos_alone_n0`<br>`pos_struct_n0`     | `neg_zla_ptr`      | `pos_vla_0n`     | `pos_vla_00`     | `pos_vla_n0`      | `neg_zla_vla_ptr`     | `pos_vla_zla_0n`     | `pos_vla_zla_00`<br>`pos_vla_alone_00`<br>`pos_vla_struct_00`     | `pos_vla_zla_n0`<br>`pos_vla_alone_n0`<br>`pos_vla_struct_n0`     | `neg_vla_zla_ptr`     | ID        |
| ------------------------- | --------- | ------------------- | ---------------- | ------------------------------------------------------------- | ----------------------------------------------------- | ------------------ | ---------------- | ---------------- | ----------------- | --------------------- | -------------------- | ----------------------------------------------------------------- | ----------------------------------------------------------------- | --------------------- | --------- |
| &nbsp;                    | e.g.:     | `Size0 *ptr`        | `ZLA[0][N]`      | `ZLA[0][0]`                                                   | `ZLA[N][0]`                                           | `(*ZLA)[0]`        | `VLA[d0][n]`     | `VLA[d0][d0]`    | `VLA[n][d0]`      | `(*VLA)[d0]`          | `VLAofZLA[d0][N]`    | `VLAofZLA[d0][0]`                                                 | `VLAofZLA[n][0]`                                                  | `(*VLAofZLA)[d0][0]`  | &nbsp;    |
|                           |           |                     |                  |                                                               |                                                       |                    |                  |                  |                   |                       |                      |                                                                   |                                                                   |                       |           |
| countof_ns<sup>bltn</sup> | Clang     | ✅                   | ✅                | ✅                                                             | ❌                                                     | ✅                  | ✅                | ✅                | ☸️<sub>Inv0</sub> | ✅                     | ✅                    | ✅                                                                 | ☸️<sub>Inv0</sub>                                                 | ✅                     | Clang     |
|                           | GNU       | ✅                   | ✅                | ✅                                                             | ❌                                                     | ✅                  | ✅                | ✅                | ☸️<sub>Inv0</sub> | ✅                     | ✅                    | ✅                                                                 | ☸️<sub>Inv0</sub>                                                 | ✅                     | GNU       |
|                           | Intel     |                     | ✅                | ✅                                                             | ❌                                                     | ✅                  | ✅                | ✅                | ☸️<sub>Inv0</sub> | ✅                     | ✅                    | ✅                                                                 | ☸️<sub>Inv0</sub>                                                 | ✅                     | Intel     |
|                           | IntelLLVM | ✅                   | ✅                | ✅                                                             | ❌                                                     | ✅                  | ✅                | ✅                | ☸️<sub>Inv0</sub> | ✅                     | ✅                    | ✅                                                                 | ☸️<sub>Inv0</sub>                                                 | ✅                     | IntelLLVM |
|                           | LCC       |                     | ✅                | ✅                                                             | ❌                                                     | ✅                  | ✅                | ✅                | ☸️<sub>Inv0</sub> | ✅                     | ✅                    | ✅                                                                 | ☸️<sub>Inv0</sub>                                                 | ✅                     | LCC       |
|                           | MSVC      | n/a                 | n/a              | n/a                                                           | n/a                                                   | n/a                | n/a              | n/a              | n/a               | n/a                   | n/a                  | n/a                                                               | n/a                                                               | n/a                   | MSVC      |
|                           | NVHPC     |                     | ✅                | ✅                                                             | ❌                                                     | ✅                  | ✅                | ✅                | ☸️<sub>Inv0</sub> | ✅                     | ✅                    | ✅                                                                 | ☸️<sub>Inv0</sub>                                                 | ✅                     | NVHPC     |
|                           | Pelles    |                     |                  |                                                               |                                                       |                    |                  |                  |                   |                       |                      |                                                                   |                                                                   |                       | PellesC   |
|                           | PGI       |                     |                  |                                                               |                                                       |                    |                  |                  |                   |                       |                      |                                                                   |                                                                   |                       | PGI       |
|                           | SunPro    | ✅                   |                  |                                                               |                                                       | ✅                  | ✅                | ✅                | ☸️<sub>Inv0</sub> | ✅                     |                      |                                                                   |                                                                   | ✅                     | SunPro    |
|                           |           |                     |                  |                                                               |                                                       |                    |                  |                  |                   |                       |                      |                                                                   |                                                                   |                       |           |
| countof_ns<sup>c11</sup>  | Clang     | ✅                   | ✅                | ✅                                                             | ❌                                                     | ✅                  | ✅                | ✅                | ☸️<sub>Inv0</sub> | ✅                     | ✅                    | ✅                                                                 | ☸️<sub>Inv0</sub>                                                 | ✅                     | Clang     |
|                           | GNU       | ✅                   | ✅                | ✅                                                             | ❌                                                     | ✅                  | ✅                | ✅                | ☸️<sub>Inv0</sub> | ✅                     | ✅                    | ✅                                                                 | ☸️<sub>Inv0</sub>                                                 | ✅                     | GNU       |
|                           | Intel     |                     | ✅                | ✅                                                             | ❌                                                     | ⚠️❌<sub>-Inv</sub> | ✅                | ✅                | ☸️<sub>Inv0</sub> | ⚠️❌<sub>-Inv</sub>    | ✅                    | ✅                                                                 | ☸️<sub>Inv0</sub>                                                 | ⚠️❌<sub>-Inv</sub>    | Intel     |
|                           | IntelLLVM | ✅                   | ✅                | ✅                                                             | ❌                                                     | ✅                  | ✅                | ✅                | ☸️<sub>Inv0</sub> | ✅                     | ✅                    | ✅                                                                 | ☸️<sub>Inv0</sub>                                                 | ✅                     | IntelLLVM |
|                           | LCC       |                     | ✅                | ✅                                                             | ❌                                                     | ⚠️❌<sub>-Inv</sub> | ✅                | ✅                | ☸️<sub>Inv0</sub> | ⚠️❌<sub>-Inv</sub>    | ✅                    | ✅                                                                 | ☸️<sub>Inv0</sub>                                                 | ⚠️❌<sub>-Inv</sub>    | LCC       |
|                           | MSVC      | n/a                 | n/a              | n/a                                                           | n/a                                                   | n/a                | n/a              | n/a              | n/a               | n/a                   | n/a                  | n/a                                                               | n/a                                                               | n/a                   | MSVC      |
|                           | NVHPC     |                     | ✅                | ✅                                                             | ❌                                                     | ⚠️❌<sub>-Inv</sub> | ✅                | ✅                | ☸️<sub>Inv0</sub> | ⚠️❌<sub>-Inv</sub>    | ✅                    | ✅                                                                 | ☸️<sub>Inv0</sub>                                                 | ⚠️❌<sub>-Inv</sub>    | NVHPC     |
|                           | Pelles    |                     |                  |                                                               |                                                       |                    |                  |                  |                   |                       |                      |                                                                   |                                                                   |                       | PellesC   |
|                           | PGI       |                     |                  |                                                               |                                                       |                    |                  |                  |                   |                       |                      |                                                                   |                                                                   |                       | PGI       |
|                           | SunPro    | ✅❌<sub>-Inv</sub>   |                  |                                                               |                                                       | ⚠️❌<sub>-Inv</sub> | ✅                | ✅                | ☸️<sub>Inv0</sub> | ⚠️❌<sub>-Inv</sub>    |                      |                                                                   |                                                                   | ⚠️❌<sub>-Inv</sub>    | SunPro    |
|                           |           |                     |                  |                                                               |                                                       |                    |                  |                  |                   |                       |                      |                                                                   |                                                                   |                       |           |
| countof_ns<sup>gen</sup>  | Clang     | ✅                   | ✅                | ✅                                                             | ❌                                                     | ✅                  | ❌                | ❌                | ❌                 | ✅                     | ❌                    | ❌                                                                 | ❌                                                                 | ✅                     | Clang     |
|                           | GNU       | ✅                   | ✅                | ✅                                                             | ❌                                                     | ✅                  | ❌                | ❌                | ❌                 | ✅                     | ❌                    | ❌                                                                 | ❌                                                                 | ✅                     | GNU       |
|                           | Intel     |                     | ✅                | ✅                                                             | ❌                                                     | ✅                  | ❌                | ❌                | ❌                 | ✅                     | ❌                    | ✅                                                                 | ⚠️<sub>-Inv</sub>                                                 | ✅                     | Intel     |
|                           | IntelLLVM | ✅                   | ✅                | ✅                                                             | ❌                                                     | ✅                  | ❌                | ❌                | ❌                 | ✅                     | ❌                    | ❌                                                                 | ❌                                                                 | ✅                     | IntelLLVM |
|                           | LCC       |                     | ✅                | ✅                                                             | ❌                                                     | ✅                  | ❌                | ❌                | ❌                 | ✅                     | ❌                    | ✅                                                                 | ⚠️<sub>-Inv</sub>                                                 | ✅                     | LCC       |
|                           | MSVC      | n/a                 | n/a              | n/a                                                           | n/a                                                   | n/a                | n/a              | n/a              | n/a               | n/a                   | n/a                  | n/a                                                               | n/a                                                               | n/a                   | MSVC      |
|                           | NVHPC     | n/a...              | ✅                | ✅                                                             | ❌                                                     | ✅                  | ❌                | ❌                | ❌                 | ✅                     | ❌                    | ✅                                                                 | ⚠️<sub>-Inv</sub>                                                 | ✅                     | NVHPC     |
|                           | Pelles    |                     |                  |                                                               |                                                       |                    |                  |                  |                   |                       |                      |                                                                   |                                                                   |                       | PellesC   |
|                           | PGI       |                     |                  |                                                               |                                                       |                    |                  |                  |                   |                       |                      |                                                                   |                                                                   |                       | PGI       |
|                           | SunPro    | ✅                   |                  |                                                               |                                                       | ✅                  | ❌                | ❌                | ❌                 | ✅                     |                      |                                                                   |                                                                   | ✅                     | SunPro    |
| &nbsp;                    | **Hdrs:** | **`neg_alone_ptr`** | **`pos_zla_0n`** | **`pos_zla_00`<br>`pos_zla_alone_00`<br>`pos_zla_struct_00`** | **`pos_zla_n0`<br>`pos_alone_n0`<br>`pos_struct_n0`** | **`neg_zla_ptr`**  | **`pos_vla_0n`** | **`pos_vla_00`** | **`pos_vla_n0`**  | **`neg_zla_vla_ptr`** | **`pos_vla_zla_0n`** | **`pos_vla_zla_00`<br>`pos_vla_alone_00`<br>`pos_vla_struct_00`** | **`pos_vla_zla_n0`<br>`pos_vla_alone_n0`<br>`pos_vla_struct_n0`** | **`neg_vla_zla_ptr`** | &nbsp;    |
<!-- endspan: "c" -->
### Сравнения
<!-- span: "c" keys: "Method", "ID" -->

| Method         | ID        | `neg_alone_ptr`     | `pos_zla_0n`     | `pos_zla_00`<br>`pos_zla_alone_00`<br>`pos_zla_struct_00`     | `pos_zla_n0`<br>`pos_alone_n0`<br>`pos_struct_n0`     | `neg_zla_ptr`                                          | `pos_vla_0n`                                        | `pos_vla_00`                           | `pos_vla_n0`                       | `neg_zla_vla_ptr`                    | `pos_vla_zla_0n`     | `pos_vla_zla_00`<br>`pos_vla_alone_00`<br>`pos_vla_struct_00`     | `pos_vla_zla_n0`<br>`pos_vla_alone_n0`<br>`pos_vla_struct_n0`     | `neg_vla_zla_ptr`                    | ID        |
| -------------- | --------- | ------------------- | ---------------- | ------------------------------------------------------------- | ----------------------------------------------------- | ------------------------------------------------------ | --------------------------------------------------- | -------------------------------------- | ---------------------------------- | ------------------------------------ | -------------------- | ----------------------------------------------------------------- | ----------------------------------------------------------------- | ------------------------------------ | --------- |
| &nbsp;         | e.g.:     | `Size0 *ptr`        | `ZLA[0][N]`      | `ZLA[0][0]`                                                   | `ZLA[N][0]`                                           | `(*ZLA)[0]`                                            | `VLA[d0][n]`                                        | `VLA[d0][d0]`                          | `VLA[n][d0]`                       | `(*VLA)[d0]`                         | `VLAofZLA[d0][N]`    | `VLAofZLA[d0][0]`                                                 | `VLAofZLA[n][0]`                                                  | `(*VLAofZLA)[d0][0]`                 | &nbsp;    |
|                |           |                     |                  |                                                               |                                                       |                                                        |                                                     |                                        |                                    |                                      |                      |                                                                   |                                                                   |                                      |           |
| countof        | Clang     | ✅                   | ✅                | ✅                                                             | ✅                                                     | ✅                                                      | ✅                                                   | ✅                                      | ✅                                  | ✅                                    | ✅                    | ✅                                                                 | ✅                                                                 | ✅                                    | Clang     |
|                | GNU       | ⚠️<sub>TODO</sub>   |                  |                                                               |                                                       |                                                        |                                                     |                                        |                                    |                                      |                      |                                                                   |                                                                   |                                      | GNU       |
|                | IntelLLVM | ✅                   | ✅                | ✅                                                             | ✅                                                     | ✅                                                      | ✅                                                   | ✅                                      | ✅                                  | ✅                                    | ✅                    | ✅                                                                 | ✅                                                                 | ✅                                    | IntelLLVM |
|                |           |                     |                  |                                                               |                                                       |                                                        |                                                     |                                        |                                    |                                      |                      |                                                                   |                                                                   |                                      |           |
| ms_countof     | Clang     | ✅💣<sub>wDIV0</sub> | ✅                | ❌💣<sub>wDIV0</sub>                                           | ❌💣<sub>wDIV0</sub>                                   | ⚠️💣<sub>wDIV0</sub>❌<sub>-Inv</sub>                   | ✅                                                   | ⚠️<sub>-Inv</sub>💥<sub>-FPE</sub>     | ⚠️<sub>-Inv</sub>💥<sub>-FPE</sub> | ⚠️❌<sub>-Inv</sub>💥<sub>-FPE</sub>  | ✅                    | ⚠️<sub>-Inv</sub>💣<sub>wDIV0</sub>💥<sub>-FPE</sub>              | ⚠️<sub>-Inv</sub>💣<sub>wDIV0</sub>💥<sub>-FPE</sub>              | ⚠️❌<sub>-Inv</sub>💥<sub>-FPE</sub>  | Clang     |
|                | GNU       | ✅💣<sub>wDIV0</sub> | ✅                | ❌💣<sub>wDIV0</sub>                                           | ❌💣<sub>wDIV0</sub>                                   | ⚠️💣<sub>wDIV0</sub>❌<sub>-Inv</sub>💥<sub>-FPE</sub>  | ✅                                                   | ⚠️<sub>-Inv</sub>💥<sub>-FPE</sub>     | ⚠️<sub>-Inv</sub>💥<sub>-FPE</sub> | ⚠️❌<sub>-Inv</sub>💥<sub>-FPE</sub>  | ✅                    | ⚠️<sub>-Inv</sub>💣<sub>wDIV0</sub>💥<sub>-FPE</sub>              | ⚠️<sub>-Inv</sub>💣<sub>wDIV0</sub>💥<sub>-FPE</sub>              | ⚠️❌<sub>-Inv</sub>💥<sub>-FPE</sub>  | GNU       |
|                | Intel     |                     | ✅                | ❌💣<sub>wDIV0</sub>                                           | ❌💣<sub>wDIV0</sub>                                   | ⚠️💣<sub>wDIV0</sub>❌<sub>-Inv</sub>💥<sub>-FPE</sub>  | ✅                                                   | ☸️<sub>Inv0</sub><br>⚠️<sub>TODO</sub> | ⚠️<sub>-Inv</sub>                  | ⚠️❌<sub>-Inv</sub>💥<sub>-FPE</sub>  | ✅                    | ☸️<sub>Inv0</sub><br>⚠️<sub>TODO</sub>                            | ⚠️<sub>-Inv</sub>💣<sub>wDIV0</sub>                               | ⚠️❌<sub>-Inv</sub>💥<sub>-FPE</sub>  | Intel     |
|                | IntelLLVM | ✅💣<sub>wDIV0</sub> | ✅                | ❌💣<sub>wDIV0</sub>                                           | ❌💣<sub>wDIV0</sub>                                   | ⚠️💣<sub>wDIV0</sub>❌<sub>-Inv</sub>💥<sub>-SEGV</sub> | ✅                                                   | ⚠️<sub>-Inv</sub>                      | ⚠️<sub>-Inv</sub>                  | ⚠️❌<sub>-Inv</sub>💥<sub>-SEGV</sub> | ✅                    | ⚠️<sub>-Inv</sub>💣<sub>wDIV0</sub>                               | ⚠️<sub>-Inv</sub>💣<sub>wDIV0</sub>                               | ⚠️❌<sub>-Inv</sub>💥<sub>-SEGV</sub> | IntelLLVM |
|                | LCC       |                     | ✅                | ❌💣<sub>wDIV0</sub>                                           | ❌💣<sub>wDIV0</sub>                                   | ⚠️❌<sub>-Inv</sub>💥<sub>-FPE</sub>                    | ✅                                                   | ⚠️<sub>-Inv</sub>💥<sub>-FPE</sub>     | ⚠️<sub>-Inv</sub>💥<sub>-FPE</sub> | ⚠️❌<sub>-Inv</sub>💥<sub>-FPE</sub>  | ✅                    | ⚠️<sub>-Inv</sub>💥<sub>-FPE</sub>                                | ⚠️<sub>-Inv</sub>💥<sub>-FPE</sub>                                | ⚠️❌<sub>-Inv</sub>💥<sub>-FPE</sub>  | LCC       |
|                | MSVC      | n/a                 | n/a              | n/a                                                           | n/a                                                   | n/a                                                    | n/a                                                 | n/a                                    | n/a                                | n/a                                  | n/a                  | n/a                                                               | n/a                                                               | n/a                                  | MSVC      |
|                | NVHPC     |                     | ✅                | ❌💣<sub>wDIV0</sub>                                           | ❌💣<sub>wDIV0</sub>                                   | ⚠️❌<sub>-Inv</sub>                                     | ⚠️<sub>-Inv</sub>💥<sub>-FPE</sub>                  | ⚠️<sub>-Inv</sub>💥<sub>-FPE</sub>     | ⚠️<sub>-Inv</sub>💥<sub>-FPE</sub> | ⚠️❌<sub>-Inv</sub>                   | ✅                    | ⚠️<sub>-Inv</sub>                                                 | ⚠️<sub>-Inv</sub>                                                 | ⚠️❌<sub>-Inv</sub>                   | NVHPC     |
|                | SunPro    | ✅                   |                  |                                                               |                                                       | ⚠️❌<sub>-Inv</sub>                                     | ✅                                                   | ⚠️<sub>-Inv</sub>💥<sub>-FPE</sub>     | ⚠️<sub>-Inv</sub>💥<sub>-FPE</sub> | ⚠️❌<sub>-Inv</sub>                   |                      |                                                                   |                                                                   | ⚠️❌<sub>-Inv</sub>                   | SunPro    |
|                |           |                     |                  |                                                               |                                                       |                                                        |                                                     |                                        |                                    |                                      |                      |                                                                   |                                                                   |                                      |           |
| JZMG_ARRAY_LEN | Clang     | ✅💣<sub>wDIV0</sub> | ✅                | ✅                                                             | ❌💣<sub>wDIV0</sub>                                   | ✅💣<sub>wDIV0</sub>                                    | ✅                                                   | ⚠️<sub>-Inv</sub>💥<sub>-FPE</sub>     | ⚠️<sub>-Inv</sub>💥<sub>-FPE</sub> | ✅                                    | ✅                    | ⚠️<sub>-Inv</sub>💣<sub>wDIV0</sub>💥<sub>-FPE</sub>              | ⚠️<sub>-Inv</sub>💣<sub>wDIV0</sub>💥<sub>-FPE</sub>              | ✅                                    | Clang     |
|                | GNU       | ✅💣<sub>wDIV0</sub> | ✅                | ✅                                                             | ❌💣<sub>wDIV0</sub>                                   | ✅💣<sub>wDIV0</sub>                                    | ✅                                                   | ⚠️<sub>-Inv</sub>💥<sub>-FPE</sub>     | ⚠️<sub>-Inv</sub>💥<sub>-FPE</sub> | ✅                                    | ✅                    | ⚠️<sub>-Inv</sub>💣<sub>wDIV0</sub>💥<sub>-FPE</sub>              | ⚠️<sub>-Inv</sub>💣<sub>wDIV0</sub>💥<sub>-FPE</sub>              | ✅                                    | GNU       |
|                | Intel     |                     | ✅                | ✅                                                             | ❌💣<sub>wDIV0</sub>                                   | ⚠️💣<sub>wDIV0</sub>❌<sub>-Inv</sub>💥<sub>-FPE</sub>  | ✅                                                   | ☸️<sub>Inv0</sub>⚠️<sub>TODO</sub>     | ⚠️<sub>-Inv</sub>                  | ⚠️❌<sub>-Inv</sub>💥<sub>-FPE</sub>  | ✅                    | ☸️<sub>Inv0</sub>⚠️<sub>TODO</sub>                                | ⚠️<sub>-Inv</sub>💣<sub>wDIV0</sub>                               | ⚠️❌<sub>-Inv</sub>💥<sub>-FPE</sub>  | Intel     |
|                | IntelLLVM | ✅💣<sub>wDIV0</sub> | ✅                | ✅                                                             | ❌💣<sub>wDIV0</sub>                                   | ✅💣<sub>wDIV0</sub>                                    | ✅                                                   | ⚠️<sub>-Inv</sub>                      | ⚠️<sub>-Inv</sub>                  | ✅                                    | ✅                    | ⚠️<sub>-Inv</sub>💣<sub>wDIV0</sub>                               | ⚠️<sub>-Inv</sub>💣<sub>wDIV0</sub>                               | ✅                                    | IntelLLVM |
|                | LCC       |                     | ✅                | ✅                                                             | ❌💣<sub>wDIV0</sub>                                   | ⚠️❌<sub>-Inv</sub>💥<sub>-FPE</sub>                    | ✅                                                   | ⚠️<sub>-Inv</sub>💥<sub>-FPE</sub>     | ⚠️<sub>-Inv</sub>💥<sub>-FPE</sub> | ⚠️❌<sub>-Inv</sub>💥<sub>-FPE</sub>  | ✅                    | ⚠️<sub>-Inv</sub>💥<sub>-FPE</sub>                                | ⚠️<sub>-Inv</sub>💥<sub>-FPE</sub>                                | ⚠️❌<sub>-Inv</sub>💥<sub>-FPE</sub>  | LCC       |
|                | MSVC      | n/a                 | n/a              | n/a                                                           | n/a                                                   | n/a                                                    | n/a                                                 | n/a                                    | n/a                                | n/a                                  | n/a                  | n/a                                                               | n/a                                                               | n/a                                  | MSVC      |
|                | NVHPC     |                     | ✅                | ✅                                                             | ❌💣<sub>wDIV0</sub>                                   | ⚠️❌<sub>-Inv</sub>                                     | ⚠️<sub>-Inv</sub>💥<sub>-FPE</sub>⚠️<sub>TODO</sub> | ⚠️<sub>-Inv</sub>💥<sub>-FPE</sub>     | ⚠️<sub>-Inv</sub>💥<sub>-FPE</sub> | ⚠️❌<sub>-Inv</sub>                   | ✅                    | ⚠️<sub>-Inv</sub>💣<sub>wDIV0</sub>                               | ⚠️<sub>-Inv</sub>💣<sub>wDIV0</sub>                               | ⚠️❌<sub>-Inv</sub>                   | NVHPC     |
|                | SunPro    | ⚠️❌<sub>-Inv</sub>  |                  |                                                               |                                                       | ⚠️❌<sub>-Inv</sub>                                     | ✅                                                   | ⚠️<sub>-Inv</sub>💥<sub>-FPE</sub>     | ⚠️<sub>-Inv</sub>💥<sub>-FPE</sub> | ⚠️❌<sub>-Inv</sub>                   |                      |                                                                   |                                                                   | ⚠️❌<sub>-Inv</sub>                   | SunPro    |
|                |           |                     |                  |                                                               |                                                       |                                                        |                                                     |                                        |                                    |                                      |                      |                                                                   |                                                                   |                                      |           |
| LNX_ARRAY_SIZE | Clang     | ✅💣<sub>wDIV0</sub> | ✅                | ❌💣<sub>wDIV0</sub>                                           | ❌💣<sub>wDIV0</sub>                                   | ✅💣<sub>wDIV0</sub>                                    | ✅                                                   | ⚠️<sub>-Inv</sub>💥<sub>-FPE</sub>     | ⚠️<sub>-Inv</sub>💥<sub>-FPE</sub> | ✅                                    | ✅                    | ⚠️<sub>-Inv</sub>💣<sub>wDIV0</sub>💥<sub>-FPE</sub>              | ⚠️<sub>-Inv</sub>💣<sub>wDIV0</sub>💥<sub>-FPE</sub>              | ✅                                    | Clang     |
|                | GNU       | ✅💣<sub>wDIV0</sub> | ✅                | ❌💣<sub>wDIV0</sub>                                           | ❌💣<sub>wDIV0</sub>                                   | ✅💣<sub>wDIV0</sub>                                    | ✅                                                   | ⚠️<sub>-Inv</sub>💥<sub>-FPE</sub>     | ⚠️<sub>-Inv</sub>💥<sub>-FPE</sub> | ✅                                    | ✅                    | ⚠️<sub>-Inv</sub>💣<sub>wDIV0</sub>💥<sub>-FPE</sub>              | ⚠️<sub>-Inv</sub>💣<sub>wDIV0</sub>💥<sub>-FPE</sub>              | ✅                                    | GNU       |
|                | IntelLLVM | ✅💣<sub>wDIV0</sub> | ✅                | ❌💣<sub>wDIV0</sub>                                           | ❌💣<sub>wDIV0</sub>                                   | ✅💣<sub>wDIV0</sub>                                    | ✅                                                   | ⚠️<sub>-Inv</sub>                      | ⚠️<sub>-Inv</sub>                  | ✅                                    | ✅                    | ⚠️<sub>-Inv</sub>💣<sub>wDIV0</sub>                               | ⚠️<sub>-Inv</sub>💣<sub>wDIV0</sub>                               | ✅                                    | IntelLLVM |
|                | NVHPC     | ✅💣<sub>wDIV0</sub> | ✅                | ❌💣<sub>wDIV0</sub>                                           | ❌💣<sub>wDIV0</sub>                                   | ✅💣<sub>wDIV0</sub>                                    | ⚠️<sub>-Inv</sub>💥<sub>-FPE</sub>                  | ⚠️<sub>-Inv</sub>💥<sub>-FPE</sub>     | ⚠️<sub>-Inv</sub>💥<sub>-FPE</sub> | ✅                                    | ✅                    | ⚠️<sub>-Inv</sub>💣<sub>wDIV0</sub>                               | ⚠️<sub>-Inv</sub>💣<sub>wDIV0</sub>                               | ✅                                    | NVHPC     |
|                |           |                     |                  |                                                               |                                                       |                                                        |                                                     |                                        |                                    |                                      |                      |                                                                   |                                                                   |                                      |           |
| ALX_COUNTOF    | Clang     | ✅💣<sub>wDIV0</sub> | ✅                | ❌💣<sub>wDIV0</sub>                                           | ❌💣<sub>wDIV0</sub>                                   | ✅💣<sub>wDIV0</sub>                                    | ✅                                                   | ⚠️<sub>-Inv</sub>💥<sub>-FPE</sub>     | ⚠️<sub>-Inv</sub>💥<sub>-FPE</sub> | ✅                                    | ✅                    | ⚠️<sub>-Inv</sub>💣<sub>wDIV0</sub>💥<sub>-FPE</sub>              | ⚠️<sub>-Inv</sub>💣<sub>wDIV0</sub>💥<sub>-FPE</sub>              | ✅                                    | Clang     |
|                | GNU       | ✅💣<sub>wDIV0</sub> | ✅                | ❌💣<sub>wDIV0</sub>                                           | ❌💣<sub>wDIV0</sub>                                   | ✅💣<sub>wDIV0</sub>                                    | ✅                                                   | ⚠️<sub>-Inv</sub>💥<sub>-FPE</sub>     | ⚠️<sub>-Inv</sub>💥<sub>-FPE</sub> | ✅                                    | ✅                    | ⚠️<sub>-Inv</sub>💣<sub>wDIV0</sub>💥<sub>-FPE</sub>              | ⚠️<sub>-Inv</sub>💣<sub>wDIV0</sub>💥<sub>-FPE</sub>              | ✅                                    | GNU       |
|                | IntelLLVM | ✅💣<sub>wDIV0</sub> | ✅                | ❌💣<sub>wDIV0</sub>                                           | ❌💣<sub>wDIV0</sub>                                   | ✅💣<sub>wDIV0</sub>                                    | ✅                                                   | ⚠️<sub>-Inv</sub>                      | ⚠️<sub>-Inv</sub>                  | ✅                                    | ✅                    | ⚠️<sub>-Inv</sub>💣<sub>wDIV0</sub>                               | ⚠️<sub>-Inv</sub>💣<sub>wDIV0</sub>                               | ✅                                    | IntelLLVM |
|                | NVHPC     | ✅💣<sub>wDIV0</sub> | ✅                | ❌💣<sub>wDIV0</sub>                                           | ❌💣<sub>wDIV0</sub>                                   | ✅💣<sub>wDIV0</sub>                                    | ⚠️<sub>-Inv</sub>💥<sub>-FPE</sub>                  | ⚠️<sub>-Inv</sub>💥<sub>-FPE</sub>     | ⚠️<sub>-Inv</sub>💥<sub>-FPE</sub> | ✅                                    | ✅                    | ⚠️<sub>-Inv</sub>💣<sub>wDIV0</sub>                               | ⚠️<sub>-Inv</sub>💣<sub>wDIV0</sub>                               | ✅                                    | NVHPC     |
| &nbsp;         | **Hdrs:** | **`neg_alone_ptr`** | **`pos_zla_0n`** | **`pos_zla_00`<br>`pos_zla_alone_00`<br>`pos_zla_struct_00`** | **`pos_zla_n0`<br>`pos_alone_n0`<br>`pos_struct_n0`** | **`neg_zla_ptr`**                                      | **`pos_vla_0n`**                                    | **`pos_vla_00`**                       | **`pos_vla_n0`**                   | **`neg_zla_vla_ptr`**                | **`pos_vla_zla_0n`** | **`pos_vla_zla_00`<br>`pos_vla_alone_00`<br>`pos_vla_struct_00`** | **`pos_vla_zla_n0`<br>`pos_vla_alone_n0`<br>`pos_vla_struct_n0`** | **`neg_vla_zla_ptr`**                | &nbsp;    |
<!-- endspan: "c" -->
## Стандарт языка C++
### `countof_ns()`
<!-- span: "c++" keys: "Method", "ID" -->

| Method                    | ID        | `cntfn_dflt`     | `pos_array`     | `pos_cv_array`       | `neg_ptr`     | `neg_cv_ptr`     | `neg_other`     | `pos_func`     | `neg_func`     |           | `pos__selftest`     | `neg__selftest`     |
| ------------------------- | --------- | ---------------- | --------------- | -------------------- | ------------- | ---------------- | --------------- | -------------- | -------------- | --------- | ------------------- | ------------------- |
| &nbsp;                    | e.g.:     |                  | `array[N]`      | `const array[N]`<br> | `*ptr`        | `const *ptr`<br> | other<br>       |                |                |           |                     |                     |
|                           |           |                  |                 |                      |               |                  |                 |                |                |           |                     |                     |
| countof_ns<sup>bltn</sup> | Clang     | ✅                | ✅               | ✅                    | ✅             | ✅                | ✅               | ✅              | ✅              | Clang     | ✅                   | ✅                   |
|                           | GNU       | ✅                | ✅               | ✅                    | ✅             | ✅                | ✅               | ✅              | ✅              | GNU       | ✅                   | ✅                   |
|                           | Intel     | ✅                | ✅               | ✅                    | ✅             | ✅                | ✅               | ✅              | ✅              | Intel     | ✅                   | ✅                   |
|                           | IntelLLVM | ✅                | ✅               | ✅                    | ✅             | ✅                | ✅               | ✅              | ✅              | IntelLLVM | ✅                   | ✅                   |
|                           | LCC       | ✅                | ✅               | ✅                    | ✅             | ✅                | ✅               | ✅              | ✅              | LCC       | ✅                   | ✅                   |
|                           | MSVC      |                  |                 |                      |               |                  |                 |                |                | MSVC      |                     |                     |
|                           | NVHPC     | ✅                | ✅               | ✅                    | ✅             | ✅                | ✅               | ✅              | ✅              | NVHPC     | ✅                   | ✅                   |
|                           | PGI       |                  |                 |                      |               |                  |                 |                |                | PGI       |                     |                     |
|                           | SunPro    | ✅                | ✅               | ✅                    | ✅             | ✅                | ✅               | ✅              | ✅              | SunPro    | ✅                   | ✅                   |
|                           |           |                  |                 |                      |               |                  |                 |                |                |           |                     |                     |
| countof_ns<sup>tmpl</sup> | Clang     |                  | ✅               | ✅                    | ✅             | ✅                | ✅               | ✅              | ✅              | Clang     | ✅                   | ✅                   |
|                           | GNU       |                  | ✅               | ✅                    | ✅             | ✅                | ✅               | ✅              | ✅              | GNU       | ✅                   | ✅                   |
|                           | Intel     |                  | ✅               | ✅                    | ✅             | ✅                | ✅               | ✅              | ✅              | Intel     | ✅                   | ✅                   |
|                           | IntelLLVM |                  | ✅               | ✅                    | ✅             | ✅                | ✅               | ✅              | ✅              | IntelLLVM | ✅                   | ✅                   |
|                           | LCC       |                  | ✅               | ✅                    | ✅             | ✅                | ✅               | ✅              | ✅              | LCC       | ✅                   | ✅                   |
|                           | MSVC      | ✅                | ✅               | ✅                    | ✅             | ✅                | ✅               | ✅              | ✅              | MSVC      | ✅                   | ✅                   |
|                           | NVHPC     |                  | ✅               | ✅                    | ✅             | ✅                | ✅               | ✅              | ✅              | NVHPC     | ✅                   | ✅                   |
|                           | PGI       |                  |                 |                      |               |                  |                 |                |                | PGI       |                     |                     |
|                           | SunPro    |                  | ✅               | ✅                    | ✅             | ✅                | ✅               | ✅              | ✅              | SunPro    | ✅                   | ✅                   |
| &nbsp;                    | **Hdrs:** | **`cntfn_dflt`** | **`pos_array`** | **`pos_cv_array`**   | **`neg_ptr`** | **`neg_cv_ptr`** | **`neg_other`** | **`pos_func`** | **`neg_func`** |           | **`pos__selftest`** | **`neg__selftest`** |
<!-- endspan: "c++" -->
### Сравнения
<!-- span: "c++" keys: "Method", "ID" -->

| Method         | ID        | `pos_array`     | `pos_cv_array`       | `neg_ptr`     | `neg_cv_ptr`     | `neg_other`     | `pos_func`     | `neg_func`     |           | `pos__selftest`     | `neg__selftest`     |
| -------------- | --------- | --------------- | -------------------- | ------------- | ---------------- | --------------- | -------------- | -------------- | --------- | ------------------- | ------------------- |
| &nbsp;         | e.g.:     | `array[N]`      | `const array[N]`<br> | `*ptr`        | `const *ptr`<br> | other<br>       |                |                |           |                     |                     |
|                |           |                 |                      |               |                  |                 |                |                |           |                     |                     |
| std::size      | Clang     | ✅               | ✅                    | ✅             | ✅                | ✅               | ✅              | ✅              | Clang     | ✅                   | ✅                   |
|                | GNU       | ✅               | ✅                    | ✅             | ✅                | ✅               | ✅              | ✅              | GNU       | ✅                   | ✅                   |
|                | Intel     | ✅               | ✅                    | ✅             | ✅                | ✅               | ✅              | ✅              | Intel     | ✅                   | ✅                   |
|                | IntelLLVM | ✅               | ✅                    | ✅             | ✅                | ✅               | ✅              | ✅              | IntelLLVM | ✅                   | ✅                   |
|                | MSVC      | ✅               | ✅                    | ✅             | ✅                | ✅               | ✅              | ✅              | MSVC      | ✅                   | ✅                   |
|                | LCC       | ✅               | ✅                    | ✅             | ✅                | ✅               | ✅              | ✅              | LCC       | ✅                   | ✅                   |
|                | NVHPC     | ✅               | ✅                    | ✅             | ✅                | ✅               | ✅              | ✅              | NVHPC     | ✅                   | ✅                   |
|                | SunPro    | ✅               | ✅                    | ✅             | ✅                | ✅               | ✅              | ✅              | SunPro    | ✅                   | ✅                   |
|                |           |                 |                      |               |                  |                 |                |                |           |                     |                     |
| ms_countof     | Clang     | ✅               | ✅                    | ✅             | ✅                | ✅               | ✅              | ✅              | Clang     | ✅                   | ✅                   |
|                | GNU       | ✅               | ✅                    | ✅             | ✅                | ✅               | ✅              | ✅              | GNU       | ✅                   | ✅                   |
|                | Intel     | ✅               | ✅                    | ✅             | ✅                | ✅               | ✅              | ✅              | Intel     | ✅                   | ✅                   |
|                | IntelLLVM | ✅               | ✅                    | ✅             | ✅                | ✅               | ✅              | ✅              | IntelLLVM | ✅                   | ✅                   |
|                | MSVC      | ✅               | ✅                    | ✅             | ✅                | ✅               | ✅              | ✅              | MSVC      | ✅                   | ✅                   |
|                | LCC       | ✅               | ✅                    | ✅             | ✅                | ✅               | ✅              | ✅              | LCC       | ✅                   | ✅                   |
|                | NVHPC     | ✅               | ✅                    | ✅             | ✅                | ✅               | ✅              | ✅              | NVHPC     | ✅                   | ✅                   |
|                | SunPro    | ✅               | ✅                    | ✅             | ✅                | ✅               | ✅              | ✅              | SunPro    | ✅                   | ✅                   |
|                |           |                 |                      |               |                  |                 |                |                |           |                     |                     |
| JZMG_ARRAY_LEN | Clang     | ✅               | ✅                    | ✅             | ✅                | ✅               | ✅              | ✅              | Clang     | ✅                   | ✅                   |
|                | GNU       | ✅               | ✅                    | ✅             | ✅                | ✅               | ✅              | ✅              | GNU       | ✅                   | ✅                   |
|                | Intel     | ✅               | ✅                    | ✅             | ✅                | ✅               | ✅              | ✅              | Intel     | ✅                   | ✅                   |
|                | IntelLLVM | ✅               | ✅                    | ✅             | ✅                | ✅               | ✅              | ✅              | IntelLLVM | ✅                   | ✅                   |
|                | MSVC      | ✅               | ✅                    | ✅             | ✅                | ✅               | ✅              | ✅              | MSVC      | ✅                   | ✅                   |
|                | LCC       | ✅               | ✅                    | ✅             | ✅                | ✅               | ✅              | ✅              | LCC       | ✅                   | ✅                   |
|                | NVHPC     | ✅               | ✅                    | ✅             | ✅                | ✅               | ✅              | ✅              | NVHPC     | ✅                   | ✅                   |
|                | SunPro    | ✅               | ✅                    | ✅             | ✅                | ✅               | ✅              | ✅              | SunPro    | ✅                   | ✅                   |
| &nbsp;         | **Hdrs:** | **`pos_array`** | **`pos_cv_array`**   | **`neg_ptr`** | **`neg_cv_ptr`** | **`neg_other`** | **`pos_func`** | **`neg_func`** |           | **`pos__selftest`** | **`neg__selftest`** |
<!-- endspan: "c++" -->
## Расширения C++
### `countof_ns()`
<!-- span: "c++" keys: "Method", "ID" -->

| Method                    | ID        | `neg_alone_ptr`     | `pos_zla_0n`     | `pos_zla_00`<br>`pos_zla_alone_00`<br>`pos_zla_struct_00`     | `pos_zla_n0`<br>`pos_alone_n0`     | `pos_struct_n0`     | `neg_zla_ptr`     | `pos_vla`     | `pos_vla_cv`     | `neg_vla_ptr`     | `pos_vla_0n`     | `pos_vla_00`     | `pos_vla_n0`      | `neg_zla_vla_ptr`     | `pos_vla_zla_0n`     | `pos_vla_zla_00`<br>`pos_vla_alone_00`     | `pos_vla_struct_00`     | `pos_vla_zla_n0`<br>`pos_vla_alone_n0`     | `pos_vla_struct_n0`     | `neg_vla_zla_ptr`     | `pos_vla_func`     | `pos_vla_func2d`     | `neg_vla_func`     | ID        |
| ------------------------- | --------- | ------------------- | ---------------- | ------------------------------------------------------------- | ---------------------------------- | ------------------- | ----------------- | ------------- | ---------------- | ----------------- | ---------------- | ---------------- | ----------------- | --------------------- | -------------------- | ------------------------------------------ | ----------------------- | ------------------------------------------ | ----------------------- | --------------------- | ------------------ | -------------------- | ------------------ | --------- |
| &nbsp;                    | e.g.:     | `Size0 *ptr`        | `ZLA[0][N]`      | `ZLA[0][0]`                                                   | `ZLA[N][0]`                        | C++ struct != 0     | `(*ZLA)[0]`       |               |                  |                   |                  |                  |                   |                       |                      |                                            |                         |                                            | C++ struct != 0         |                       |                    |                      |                    | &nbsp;    |
|                           |           |                     |                  |                                                               |                                    |                     |                   |               |                  |                   |                  |                  |                   |                       |                      |                                            |                         |                                            |                         |                       |                    |                      |                    |           |
| countof_ns<sup>bltn</sup> | Clang     | ✅                   | ✅                | ✅                                                             | ✅                                  | ✅                   | ✅                 | ✅             | ✅                | ✅                 | ✅                | ✅                | ☸️<sub>Inv0</sub> | ✅                     | ✅                    | ✅                                          | ✅                       | ☸️<sub>Inv0</sub>                          | ✅                       | ✅                     | ✅                  | ✅                    | ✅                  | Clang     |
|                           | GNU       | ✅                   | ✅                | ✅                                                             | ✅                                  | ✅                   | ✅                 | ✅             | ✅                | ✅                 | ✅                | ✅                | ☸️<sub>Inv0</sub> | ✅                     | ✅                    | 🪲                                         | ✅                       | 🪲☸️<sub>Inv0</sub>                        | ✅                       | ✅                     | ✅                  | ✅                    | ✅                  | GNU       |
|                           | Intel     |                     | ✅                | ✅                                                             | ✅                                  | ✅                   | ✅                 | ✅             | 🪲               | ✅                 | ✅                | ✅                | ☸️<sub>Inv0</sub> | ✅                     | ✅                    | ✅                                          | ✅                       | ☸️<sub>Inv0</sub>                          | ✅                       | ✅                     | ✅                  | ✅                    | ✅                  | Intel     |
|                           | IntelLLVM | ✅                   | ✅                | ✅                                                             | ✅                                  | ✅                   | ✅                 | ✅             | ✅                | ✅                 | ✅                | ✅                | ☸️<sub>Inv0</sub> | ✅                     | ✅                    | ✅                                          | ✅                       | ☸️<sub>Inv0</sub>                          | ✅                       | ✅                     | ✅                  | ✅                    | ✅                  | IntelLLVM |
|                           | LCC       |                     | ✅                | ✅                                                             | ✅                                  | ✅                   | ✅                 | ✅             | 🪲               | ✅                 | ✅                | ✅                | ☸️<sub>Inv0</sub> | ✅                     | ✅                    | ✅                                          | ✅                       | ☸️<sub>Inv0</sub>                          | ✅                       | ✅                     | ✅                  | ✅                    | ✅                  | LCC       |
|                           | MSVC      |                     |                  |                                                               |                                    |                     |                   |               |                  |                   |                  |                  |                   |                       |                      |                                            |                         |                                            |                         |                       |                    |                      |                    | MSVC      |
|                           | NVHPC     |                     | ✅                | ✅                                                             | ✅                                  | ✅                   | ✅                 | ✅             | 🪲               | ✅                 | ✅                | ✅                | ☸️<sub>Inv0</sub> | ✅                     | ✅                    | ✅                                          | ✅                       | ☸️<sub>Inv0</sub>                          | ✅                       | ✅                     | ✅                  | 🪲⚠️<sub>-Inv</sub>  | ✅                  | NVHPC     |
|                           | PGI       |                     |                  |                                                               |                                    |                     |                   |               |                  |                   |                  |                  |                   |                       |                      |                                            |                         |                                            |                         |                       |                    |                      |                    | PGI       |
|                           | SunPro    | ✅                   |                  |                                                               |                                    |                     | ✅                 | ✅             | ✅                | ✅                 | ✅                | ✅                | ☸️<sub>Inv0</sub> | ✅                     |                      |                                            |                         |                                            |                         | ✅                     | 🪲                 | 🪲                   | ✅                  | SunPro    |
|                           |           |                     |                  |                                                               |                                    |                     |                   |               |                  |                   |                  |                  |                   |                       |                      |                                            |                         |                                            |                         |                       |                    |                      |                    |           |
| countof_ns<sup>tmpl</sup> | Clang     | ✅                   | ✅                | ✅                                                             | ✅                                  | ✅                   | ✅                 | ❌             | ❌                | ✅                 | ❌                | ❌                | ❌                 | ✅                     | ❌                    | ❌                                          | ❌                       | ❌                                          | ❌                       | ✅                     | ✅                  | ❌                    | ✅                  | Clang     |
|                           | GNU       | ✅                   | ✅                | ✅                                                             | ✅                                  | ✅                   | ✅                 | ❌             | ❌                | ✅                 | ❌                | ❌                | ❌                 | ✅                     | ❌                    | 🪲❌                                        | ❌                       | 🪲❌                                        | ❌                       | ✅                     | ✅                  | ❌                    | ✅                  | GNU       |
|                           | Intel     |                     | ✅                | ✅                                                             | ✅                                  | ✅                   | ✅                 | ❌             | ❌                | ✅                 | ❌                | ❌                | ❌                 | ✅                     | ❌                    | ❌                                          | ❌                       | ❌                                          | ❌                       | ✅                     | ✅                  | ❌                    | ✅                  | Intel     |
|                           | IntelLLVM | ✅                   | ✅                | ✅                                                             | ✅                                  | ✅                   | ✅                 | ❌             | ❌                | ✅                 | ❌                | ❌                | ❌                 | ✅                     | ❌                    | ❌                                          | ❌                       | ❌                                          | ❌                       | ✅                     | ✅                  | ❌                    | ✅                  | IntelLLVM |
|                           | LCC       |                     | ✅                | ✅                                                             | ✅                                  | ✅                   | ✅                 | ❌             | ❌                | ✅                 | ❌                | ❌                | ❌                 | ✅                     | ❌                    | ❌                                          | ❌                       | ❌                                          | ❌                       | ✅                     | ❌                  | ❌                    | ✅                  | LCC       |
|                           | MSVC      | n/a                 | n/a              | n/a                                                           | n/a                                | n/a                 | n/a               | n/a           | n/a              | n/a               | n/a              | n/a              | n/a               | n/a                   | n/a                  | n/a                                        | n/a                     | n/a                                        | n/a                     | n/a                   | n/a                | n/a                  | n/a                | MSVC      |
|                           | NVHPC     |                     | ✅                | ✅                                                             | ✅                                  | ✅                   | ✅                 | ❌             | ❌                | ✅                 | ❌                | ❌                | ❌                 | ✅                     | ❌                    | ❌                                          | ❌                       | ❌                                          | ❌                       | ✅                     | ✅                  | ❌                    | ✅                  | NVHPC     |
|                           | PGI       |                     |                  |                                                               |                                    |                     |                   |               |                  |                   |                  |                  |                   |                       |                      |                                            |                         |                                            |                         |                       |                    |                      |                    | PGI       |
|                           | SunPro    | ✅                   |                  |                                                               |                                    |                     | ✅                 | ❌             | ❌                | ✅                 | ❌                | ❌                | ❌                 | ✅                     |                      |                                            |                         |                                            |                         | ✅                     | ❌                  | ❌                    | ✅                  | SunPro    |
| &nbsp;                    | **Hdrs:** | **`neg_alone_ptr`** | **`pos_zla_0n`** | **`pos_zla_00`<br>`pos_zla_alone_00`<br>`pos_zla_struct_00`** | **`pos_zla_n0`<br>`pos_alone_n0`** | **`pos_struct_n0`** | **`neg_zla_ptr`** | **`pos_vla`** | **`pos_vla_cv`** | **`neg_vla_ptr`** | **`pos_vla_0n`** | **`pos_vla_00`** | **`pos_vla_n0`**  | **`neg_zla_vla_ptr`** | **`pos_vla_zla_0n`** | **`pos_vla_zla_00`<br>`pos_vla_alone_00`** | **`pos_vla_struct_00`** | **`pos_vla_zla_n0`<br>`pos_vla_alone_n0`** | **`pos_vla_struct_n0`** | **`neg_vla_zla_ptr`** | **`pos_vla_func`** | **`pos_vla_func2d`** | **`neg_vla_func`** | &nbsp;    |
<!-- endspan: "c++" -->
### Сравнения
<!-- span: "c++" keys: "Method", "ID" -->

| Method         | ID        | `neg_alone_ptr`     | `pos_zla_0n`     | `pos_zla_00`<br>`pos_zla_alone_00`<br>`pos_zla_struct_00`     | `pos_zla_n0`<br>`pos_alone_n0`     | `pos_struct_n0`     | `neg_zla_ptr`     | `pos_vla`     | `pos_vla_cv`     | `neg_vla_ptr`     | `pos_vla_0n`     | `pos_vla_00`     | `pos_vla_n0`     | `neg_zla_vla_ptr`     | `pos_vla_zla_0n`     | `pos_vla_zla_00`<br>`pos_vla_alone_00`     | `pos_vla_struct_00`     | `pos_vla_zla_n0`<br>`pos_vla_alone_n0`     | `pos_vla_struct_n0`     | `neg_vla_zla_ptr`     | `pos_vla_func`     | `pos_vla_func2d`     | `neg_vla_func`     | ID        |
| -------------- | --------- | ------------------- | ---------------- | ------------------------------------------------------------- | ---------------------------------- | ------------------- | ----------------- | ------------- | ---------------- | ----------------- | ---------------- | ---------------- | ---------------- | --------------------- | -------------------- | ------------------------------------------ | ----------------------- | ------------------------------------------ | ----------------------- | --------------------- | ------------------ | -------------------- | ------------------ | --------- |
| &nbsp;         | e.g.:     | `Size0 *ptr`        | `ZLA[0][N]`      | `ZLA[0][0]`                                                   | `ZLA[N][0]`                        | C++ struct != 0     | `(*ZLA)[0]`       |               |                  |                   |                  |                  |                  |                       |                      |                                            |                         |                                            | C++ struct != 0         |                       |                    |                      |                    | &nbsp;    |
|                |           |                     |                  |                                                               |                                    |                     |                   |               |                  |                   |                  |                  |                  |                       |                      |                                            |                         |                                            |                         |                       |                    |                      |                    |           |
| std::size      | Clang     | ✅                   | ❌                | ❌                                                             | ✅                                  | ✅                   | ✅                 |               |                  |                   |                  |                  |                  |                       |                      |                                            |                         |                                            |                         |                       |                    |                      |                    | Clang     |
|                | GNU       | ✅                   | ❌                | ❌                                                             | ✅                                  | ✅                   | ✅                 |               |                  |                   |                  |                  |                  |                       |                      |                                            |                         |                                            |                         |                       |                    |                      |                    | GNU       |
|                | Intel     |                     | ❌                | ❌                                                             | ✅                                  | ✅                   | ✅                 |               |                  |                   |                  |                  |                  |                       |                      |                                            |                         |                                            |                         |                       |                    |                      |                    | Intel     |
|                | IntelLLVM | ✅                   | ❌                | ❌                                                             | ✅                                  | ✅                   | ✅                 |               |                  |                   |                  |                  |                  |                       |                      |                                            |                         |                                            |                         |                       |                    |                      |                    | IntelLLVM |
|                | MSVC      |                     |                  |                                                               |                                    |                     |                   |               |                  |                   |                  |                  |                  |                       |                      |                                            |                         |                                            |                         |                       |                    |                      |                    | MSVC      |
|                | LCC       |                     | ❌                | ❌                                                             | ✅                                  | ✅                   | ✅                 |               |                  |                   |                  |                  |                  |                       |                      |                                            |                         |                                            |                         |                       |                    |                      |                    | LCC       |
|                | NVHPC     |                     | ❌                | ❌                                                             | ✅                                  | ✅                   | ✅                 |               |                  |                   |                  |                  |                  |                       |                      |                                            |                         |                                            |                         |                       |                    |                      |                    | NVHPC     |
|                | SunPro    |                     | ❌                | ❌                                                             | ✅                                  | ✅                   | ✅                 |               |                  |                   |                  |                  |                  |                       |                      |                                            |                         |                                            |                         |                       |                    |                      |                    | SunPro    |
|                |           |                     |                  |                                                               |                                    |                     |                   |               |                  |                   |                  |                  |                  |                       |                      |                                            |                         |                                            |                         |                       |                    |                      |                    |           |
| ms_countof     | Clang     | ✅                   | ❌                | ❌                                                             | ✅                                  | ✅                   | ✅                 |               |                  | ✅                 | ❌                |                  |                  | ✅                     | ❌                    |                                            |                         |                                            |                         | ✅                     |                    |                      | ✅                  | Clang     |
|                | GNU       | ✅                   | ❌                | ❌                                                             | ✅                                  | ✅                   | ✅                 |               |                  | ✅                 | ❌                |                  |                  | ✅                     | ❌                    |                                            |                         |                                            |                         | ✅                     |                    |                      | ✅                  | GNU       |
|                | Intel     |                     | ❌                | ❌                                                             | ✅                                  | ✅                   | ✅                 |               |                  | ✅                 | ❌                |                  |                  | ✅                     | ❌                    |                                            |                         |                                            |                         | ✅                     |                    |                      | ✅                  | Intel     |
|                | IntelLLVM | ✅                   | ❌                | ❌                                                             | ✅                                  | ✅                   | ✅                 |               |                  | ✅                 | ❌                |                  |                  | ✅                     | ❌                    |                                            |                         |                                            |                         | ✅                     |                    |                      | ✅                  | IntelLLVM |
|                | MSVC      |                     |                  |                                                               |                                    |                     |                   |               |                  |                   |                  |                  |                  |                       |                      |                                            |                         |                                            |                         |                       |                    |                      |                    | MSVC      |
|                | LCC       |                     | ❌                | ❌                                                             | ✅                                  | ✅                   | ✅                 |               |                  | ✅                 | ❌                |                  |                  | ✅                     | ❌                    |                                            |                         |                                            |                         | ✅                     |                    |                      | ✅                  | LCC       |
|                | NVHPC     |                     | ❌                | ❌                                                             | ✅                                  | ✅                   | ✅                 |               |                  | ✅                 | ❌                |                  |                  | ✅                     | ❌                    |                                            |                         |                                            |                         | ✅                     |                    |                      | ✅                  | NVHPC     |
|                | SunPro    | ✅                   |                  |                                                               |                                    |                     | ✅                 |               |                  | ✅                 | ❌                |                  |                  | ✅                     |                      |                                            |                         |                                            |                         | ✅                     |                    |                      | ✅                  | SunPro    |
|                |           |                     |                  |                                                               |                                    |                     |                   |               |                  |                   |                  |                  |                  |                       |                      |                                            |                         |                                            |                         |                       |                    |                      |                    |           |
| JZMG_ARRAY_LEN | Clang     | ✅                   | ✅                | ✅                                                             | ❌                                  | ✅                   | ✅                 |               |                  | ✅                 |                  |                  |                  | ✅                     |                      |                                            |                         |                                            |                         | ✅                     |                    |                      | ✅                  | Clang     |
|                | GNU       | ✅                   | ✅                | ✅                                                             | ❌                                  | ✅                   | ✅                 |               |                  | ✅                 |                  |                  |                  | ✅                     |                      |                                            |                         |                                            |                         | ✅                     |                    |                      | ✅                  | GNU       |
|                | Intel     |                     | ✅                | ✅                                                             | ❌                                  | ✅                   | ✅                 |               |                  | ✅                 |                  |                  |                  | ✅                     |                      |                                            |                         |                                            |                         | ✅                     |                    |                      | ✅                  | Intel     |
|                | IntelLLVM | ✅                   | ✅                | ✅                                                             | ❌                                  | ✅                   | ✅                 |               |                  | ✅                 |                  |                  |                  | ✅                     |                      |                                            |                         |                                            |                         | ✅                     |                    |                      | ✅                  | IntelLLVM |
|                | MSVC      |                     |                  |                                                               |                                    |                     |                   |               |                  |                   |                  |                  |                  |                       |                      |                                            |                         |                                            |                         |                       |                    |                      |                    | MSVC      |
|                | LCC       |                     | ✅                | ✅                                                             | ❌                                  | ✅                   | ✅                 |               |                  | ✅                 |                  |                  |                  | ✅                     |                      |                                            |                         |                                            |                         | ✅                     |                    |                      | ✅                  | LCC       |
|                | NVHPC     |                     | ✅                | ✅                                                             | ❌                                  | ✅                   | ✅                 |               |                  | ✅                 |                  |                  |                  | ✅                     |                      |                                            |                         |                                            |                         | ✅                     |                    |                      | ✅                  | NVHPC     |
|                | SunPro    | ✅                   | ✅                | ✅                                                             | ❌                                  | ✅                   | ✅                 |               |                  | ✅                 |                  |                  |                  | ✅                     |                      |                                            |                         |                                            |                         | ✅                     |                    |                      | ✅                  | SunPro    |
| &nbsp;         | **Hdrs:** | **`neg_alone_ptr`** | **`pos_zla_0n`** | **`pos_zla_00`<br>`pos_zla_alone_00`<br>`pos_zla_struct_00`** | **`pos_zla_n0`<br>`pos_alone_n0`** | **`pos_struct_n0`** | **`neg_zla_ptr`** | **`pos_vla`** | **`pos_vla_cv`** | **`neg_vla_ptr`** | **`pos_vla_0n`** | **`pos_vla_00`** | **`pos_vla_n0`** | **`neg_zla_vla_ptr`** | **`pos_vla_zla_0n`** | **`pos_vla_zla_00`<br>`pos_vla_alone_00`** | **`pos_vla_struct_00`** | **`pos_vla_zla_n0`<br>`pos_vla_alone_n0`** | **`pos_vla_struct_n0`** | **`neg_vla_zla_ptr`** | **`pos_vla_func`** | **`pos_vla_func2d`** | **`neg_vla_func`** | &nbsp;    |
<!-- endspan: "c++" -->
## Определения

### Методы
<!-- span: "methods" keys: "Name<br>(with link to code)", "Language" -->

| Name<br>(with link to code)                                | Language | Описание                                                                                                                       |
| ---------------------------------------------------------- | -------- | ------------------------------------------------------------------------------------------------------------------------------ |
| [countof_ns](../include/countof_ns.h)                      | C/C++    | Макрос `countof_ns()` из `"countof_ns.h"`                                                                                      |
| countof_ns¹                                                | C/C++    | Макрос `countof_ns()` из `"countof_ns.h"`  с TODO `_COUNTOF_NS_WANT_С11_VLA`                                                   |
| [countof](../include/_comparisons/stdc_countof.h)          | С        | Проект C2y в реализации компиляторов: Clang 21, GNU gcc 16 and IntelLLVM 2025.3                                                |
| [std::size](../include/_comparisons/std_size.h)            | С++      | Стандартная функция C++17                                                                                                      |
| [JZMG_ARRAY_LEN](../include/_comparisons/JZMG_ARRAY_LEN.h) | C/C++    | Ответ [James Z.M. Gao](https://stackoverflow.com/a/77001872/8585880) на stackoverflow.com (SO)                                 |
| [LNX_ARRAY_SIZE](../include/_comparisons/lnx_array_size.h) | С        | Макет реализации метода [Linux Kernel](https://github.com/torvalds/linux/blob/master/include/linux/array_size.h )              |
| [ALX_COUNTOF](../include/_comparisons/ALX_COUNTOF.h)       | С        | Ответ [alx - recommends codidact](https://stackoverflow.com/a/57537491/8585880) на SO                                          |
| [ms_countof](../include/_comparisons/ms_countof.h)         | C/C++    | Макет реализации  `_countof()` [MSVC](https://learn.microsoft.com/cpp/c-runtime-library/reference/countof-macro?view=msvc-170) |
<!-- endspan: "methods" -->
### Тесты
<!-- span: "cases" keys: "Legend<br>(with link to code)" -->

| Legend<br>(with link to code)                                                                                                                                                                 | Type     | Описание                                                                                                                                                                                                                                                                                                                                                                                                                          |
| --------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | -------- | --------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| `array[N]`<br>[`pos_array`](../tests/unit/pos_array.h)                                                                                                                                        | Positive | Обычный массив C/C++ (не VLA).<br><br>Положительный тест должен вернуть число элементов массива. Для массивов известного фиксированного размера, результат должен быть целым константным выражением.                                                                                                                                                                                                                              |
| `const array[N]`<br>[`pos_cv_array`](../tests/unit/pos_cv_array.h)                                                                                                                            | Positive | Массив с квалификатором                                                                                                                                                                                                                                                                                                                                                                                                           |
| `*ptr`<br>[`neg_ptr`](../tests/unit/neg_ptr.h)                                                                                                                                                | Negative | Обычный указатель C/C++.<br><br>Негативный тест должен вызвать нарушение ограничений (неверная программа), что должно привести к ошибке компиляции.                                                                                                                                                                                                                                                                               |
| `const *ptr`<br>[`neg_cv_ptr`](../tests/unit/neg_cv_ptr.h)                                                                                                                                    | Negative | Указатель с квалификатором                                                                                                                                                                                                                                                                                                                                                                                                        |
| other<br>[`neg_other`](../tests/unit/neg_other.h)                                                                                                                                             | Negative | Объект C/C++ не являющийся массивом                                                                                                                                                                                                                                                                                                                                                                                               |
| `VLA[n]`<br>[`pos_vla`](../tests/unit/pos_vla.h)                                                                                                                                              | Positive | Стандартный VLA массив C<br>                                                                                                                                                                                                                                                                                                                                                                                                      |
| `volatile VLA[n]`<br>[`pos_vla_cv`](../tests/unit/pos_vla_cv.h)                                                                                                                               | Positive | VLA с квалификатором<br>                                                                                                                                                                                                                                                                                                                                                                                                          |
| `(*VLA)[n]`<br>[`neg_vla_ptr`](../tests/unit/neg_vla_ptr.h)                                                                                                                                   | Negative | Указатель на VLA                                                                                                                                                                                                                                                                                                                                                                                                                  |
| `Size0 *ptr`<br>[`neg_alone_ptr`](../tests/unit/neg_alone_ptr.h)                                                                                                                              | Negative | Указатель на объект нулевого размера: [Structures with No Members](https://gcc.gnu.org/onlinedocs/gcc/Empty-Structures.html)(расширение C), [Unions with Flexible Array Members](https://gcc.gnu.org/onlinedocs/gcc/Flexible-Array-Members-in-Unions.html)(расширения C/C++), [Structures with only Flexible Array Members](https://gcc.gnu.org/onlinedocs/gcc/Flexible-Array-Members-alone-in-Structures.html)(расширения C/C++) |
| `ZLA[0][N]`<br>[`pos_zla_0n`](../tests/unit/pos_zla_0n.h)                                                                                                                                     | Positive | Двумерный [ZLA](https://gcc.gnu.org/onlinedocs/gcc/Zero-Length.html) (расширения C/C++). Старшая размерность - 0, младшая - не 0 (константы)                                                                                                                                                                                                                                                                                      |
| `ZLA[0][0]`<br>[`pos_zla_00`](../tests/unit/pos_zla_00.h)<br>[`pos_zla_alone_00`](../tests/unit/pos_zla_alone_00.h)<br>[`pos_zla_struct_00`](../tests/unit/pos_zla_struct_00.h)               | Positive | Двумерный ZLA, обе размерности 0 (константы).<br><br>Похожие тесты: ZLA объектов нулевого размера                                                                                                                                                                                                                                                                                                                                 |
| `ZLA[N][0]`<br>[`pos_zla_n0`](../tests/unit/pos_zla_n0.h)<br>[`pos_alone_n0`](../tests/unit/pos_alone_n0.h)<br>[`pos_struct_n0`](../tests/unit/pos_struct_n0.h)                               | Positive | Двумерный ZLA, младшая размерность - 0, старшая - не 0 (константы).<br><br>Похожие тесты: ZLA объектов нулевого размера. Для тестов C++  `pos_struct_n0()` - тривиальный и всегда проходит.                                                                                                                                                                                                                                       |
| `(*ZLA)[0]`<br>[`neg_zla_ptr`](../tests/unit/neg_zla_ptr.h)                                                                                                                                   | Negative | Указатель на ZLA                                                                                                                                                                                                                                                                                                                                                                                                                  |
| `VLA[d0][n]`<br>[`pos_vla_0n`](../tests/unit/pos_vla_n0.h)                                                                                                                                    | Positive | Двумерный VLA нулевой длины (расширения C/C++). Старшая размерность - 0, младшая - не 0 (переменные)                                                                                                                                                                                                                                                                                                                              |
| `VLA[d0][d0]`<br>[`pos_vla_00`](../tests/unit/pos_vla_00.h)                                                                                                                                   | Positive | Двумерный VLA нулевой длины, обе размерности 0 (переменные).                                                                                                                                                                                                                                                                                                                                                                      |
| `VLA[n][d0]`<br>[`pos_vla_n0`](../tests/unit/pos_vla_n0.h)                                                                                                                                    | Positive | Двумерный VLA нулевой длины, младшая размерность - 0, старшая - не 0 (переменные).                                                                                                                                                                                                                                                                                                                                                |
| `(*VLA)[d0]`<br>[`neg_zla_vla_ptr`](../tests/unit/neg_zla_vla_ptr.h)<br>                                                                                                                      | Negative | Указатель на VLA нулевой длины                                                                                                                                                                                                                                                                                                                                                                                                    |
| `VLAofZLA[d0][N]`<br>[`pos_vla_zla_0n`](../tests/unit/pos_vla_zla_0n.h)                                                                                                                       | Positive | VLA нулевой длины обычных массивов                                                                                                                                                                                                                                                                                                                                                                                                |
| `VLAofZLA[d0][0]`<br>[`pos_vla_zla_00`](../tests/unit/pos_vla_zla_00.h)<br>[`pos_vla_alone_00`](../tests/unit/pos_vla_alone_00.h)<br>[`pos_vla_struct_00`](../tests/unit/pos_vla_struct_00.h) | Positive | VLA нулевой длины содержащий ZLA.<br><br>Похожие тесты: VLA нулевой длины содержащий  объекты нулевого размера.                                                                                                                                                                                                                                                                                                                   |
| `VLAofZLA[n][0]`<br>[`pos_vla_zla_n0`](../tests/unit/pos_vla_zla_n0.h)<br>[`pos_vla_alone_n0`](../tests/unit/pos_vla_alone_n0.h)<br>[`pos_vla_struct_n0`](../tests/unit/pos_vla_struct_n0.h)  | Positive | VLA содержащий ZLA.                                                                                                                                                                                                                                                                                                                                                                                                               |
| `(*VLAofZLA)[d0][0]`<br>[`neg_vla_zla_ptr`](../tests/unit/neg_vla_zla_ptr.h)<br>                                                                                                              | Negative | Указатель на  VLA нулевой длины содержащий ZLA                                                                                                                                                                                                                                                                                                                                                                                    |
<!-- endspan: "cases" -->
### Результаты
<!-- span: "result" keys: "Legend&nbsp;&nbsp;",  "Test names" -->

| Legend&nbsp;&nbsp; | Test names                                               | Описание                                                                                                                       |
| ------------------ | -------------------------------------------------------- | ------------------------------------------------------------------------------------------------------------------------------ |
| ✅                  | `pos_[^.]*(\.c11\|\.bltn\|)$`<br>`neg_.*\.build_fail`    | Успех                                                                                                                          |
| ❌                  | `pos_.*\.build_fail`                                     | Ошибка компиляции позитивного теста, т.е. ложно отрицательный результат                                                        |
| ☸️<sub>Inv0</sub>  | `pos_.*\.run_0_unexpected`<br>`neg_.*\.run_0_unexpected` | Некорректный результат равный 0                                                                                                |
| ⚠️<sub>-Inv</sub>  | `pos_.*\.run_fail`                                       | Некорректный результат положительного теста                                                                                    |
| ⚠️                 | `neg_.*\.build_unexpected`                               | Неожиданная компиляция отрицательного теста                                                                                    |
| ❌<sub>-Inv</sub>   | `neg_.*\.run_fail`                                       | Неожиданный некоректный результат негативного теста, обычно неожиданная компиляция и неожиданный результат: ⚠️❌<sub>-Inv</sub> |
| 💥<sub>-FPE</sub>  | `(pos\|neg).*\.run_FPE`                                  | SIGFPE при выполнении теста                                                                                                    |
| 💥<sub>-SEGV</sub> | `(pos\|neg).*\.run_SEGV`                                 | SIGSEGV при выполнении теста                                                                                                   |
| 💣<sub>wDIV0</sub> | `(pos\|neg).*\.build_DIV0`<br>`(pos\|neg).*\.run_DIV0`   | Предупреждение компилятора: "division by zero"                                                                                 |
| 🪲                 | `(pos\|neg).*\.compiler_bug`                             | Ошибка компилятора (крах) при компиляции теста                                                                                 |
<!-- endspan: "result" -->
### Версии компиляторов и поддерживаемые расширения
<!-- span: "compiler-versions-and-extensions" keys: "ID" -->

| ID        | Max               | Extensions max                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 | Min           | Extensions min                                                                                                                                                                                                                                                                                                                                                                                                                                                                |
| --------- | ----------------- | -------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | ------------- | ----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| Clang     | 21.1.8            | HAVE_ALONE_FLEXIBLE_ARRAY<br>HAVE_ARRAY_EXTENT_CXX<br>HAVE_BUILTIN_CONSTANT_P_CXX<br>HAVE_BUILTIN_TYPES_COMPATIBLE_P<br>HAVE_COUNTOF<br>HAVE_EMPTY_STRUCTURE<br>HAVE_IS_ARRAY_CXX<br>HAVE_IS_SAME_AS_CXX<br>HAVE_IS_SAME_CXX<br>HAVE_TYPEOF<br>`HAVE___TYPEOF__`<br>`HAVE___TYPEOF_UNQUAL__`<br>HAVE_VLA0<br>HAVE_VLA0_CXX<br>HAVE_VLA_CXX<br>HAVE_VLA_ZLA<br>HAVE_ZLA<br>HAVE_ZLA_EMPTY_INITIALIZER<br>HAVE_ZLA_EMPTY_INITIALIZER_CXX<br>HAVE_ZLA_ZLA                                                         | 14.0.6        | HAVE_ARRAY_EXTENT_CXX<br>HAVE_BUILTIN_CONSTANT_P_CXX<br>HAVE_BUILTIN_TYPES_COMPATIBLE_P<br>HAVE_EMPTY_STRUCTURE<br>HAVE_IS_ARRAY_CXX<br>HAVE_IS_SAME_AS_CXX<br>HAVE_IS_SAME_CXX<br>HAVE_TYPEOF<br>`HAVE___TYPEOF__`<br>HAVE_VLA0<br>HAVE_VLA0_CXX<br>HAVE_VLA_CXX<br>HAVE_VLA_ZLA<br>HAVE_ZLA<br>HAVE_ZLA_EMPTY_INITIALIZER<br>HAVE_ZLA_EMPTY_INITIALIZER_CXX<br>HAVE_ZLA_ZLA                                                                                                 |
| GNU       | 15.2.0            | HAVE_ALONE_FLEXIBLE_ARRAY<br>HAVE_BUILTIN_CONSTANT_P_CXX<br>HAVE_BUILTIN_TYPES_COMPATIBLE_P<br>HAVE_EMPTY_STRUCTURE<br>HAVE_IS_ARRAY_CXX<br>HAVE_IS_SAME_AS_CXX<br>HAVE_IS_SAME_CXX<br>HAVE_TYPEOF<br>`HAVE___TYPEOF__`<br>`HAVE___TYPEOF_UNQUAL__`<br>HAVE_VLA0<br>HAVE_VLA0_CXX<br>HAVE_VLA_CXX<br>HAVE_VLA_ZLA<br>HAVE_ZLA<br>HAVE_ZLA_EMPTY_INITIALIZER<br>HAVE_ZLA_EMPTY_INITIALIZER_CXX<br>HAVE_ZLA_ZLA                                                                                                  | 11.3.0        | HAVE_BUILTIN_CONSTANT_P_CXX<br>HAVE_BUILTIN_TYPES_COMPATIBLE_P<br>HAVE_EMPTY_STRUCTURE<br>HAVE_IS_SAME_AS_CXX<br>HAVE_IS_SAME_CXX<br>HAVE_TYPEOF<br>`HAVE___TYPEOF__`<br>HAVE_VLA0<br>HAVE_VLA0_CXX<br>HAVE_VLA_CXX<br>HAVE_VLA_ZLA<br>HAVE_ZLA<br>HAVE_ZLA_EMPTY_INITIALIZER<br>HAVE_ZLA_EMPTY_INITIALIZER_CXX<br>HAVE_ZLA_ZLA                                                                                                                                               |
| Intel     | 2021.1.0.20201112 | HAVE_BUILTIN_CONSTANT_P_CXX<br>HAVE_STRANGE_BUILTIN_CONSTANT_P_CXX<br>HAVE_HIDDEN_BUILTIN_TYPES_COMPATIBLE_P<br>HAVE_BROKEN_BUILTIN_TYPES_COMPATIBLE_P<br>HAVE_EMPTY_STRUCTURE<br>HAVE_HIDDEN_IS_SAME_CXX<br>HAVE_TYPEOF<br>`HAVE___TYPEOF__`<br>`HAVE_BROKEN___TYPEOF__`<br>HAVE_VLA0<br>HAVE_VLA0_CXX<br>HAVE_VLA_CXX<br>HAVE_VLA_ZLA<br>HAVE_ZLA<br>HAVE_ZLA_EMPTY_INITIALIZER<br>HAVE_ZLA_EMPTY_INITIALIZER_CXX<br>HAVE_ZLA_ZLA<br>NO_ERROR_ON_SIZEOF_POINTER_SUBTRACTION                                  |               |                                                                                                                                                                                                                                                                                                                                                                                                                                                                               |
| IntelLLVM | 2025.3.0          | HAVE_ALONE_FLEXIBLE_ARRAY<br>HAVE_ARRAY_EXTENT_CXX<br>HAVE_BUILTIN_CONSTANT_P_CXX<br>HAVE_STRANGE_BUILTIN_CONSTANT_P_CXX<br>HAVE_BUILTIN_TYPES_COMPATIBLE_P<br>HAVE_COUNTOF<br>HAVE_EMPTY_STRUCTURE<br>HAVE_IS_ARRAY_CXX<br>HAVE_IS_SAME_AS_CXX<br>HAVE_IS_SAME_CXX<br>HAVE_TYPEOF<br>`HAVE___TYPEOF__`<br>`HAVE___TYPEOF_UNQUAL__`<br>HAVE_VLA0<br>HAVE_VLA0_CXX<br>HAVE_VLA_CXX<br>HAVE_VLA_ZLA<br>HAVE_ZLA<br>HAVE_ZLA_EMPTY_INITIALIZER<br>HAVE_ZLA_EMPTY_INITIALIZER_CXX<br>HAVE_ZLA_ZLA                  | 2025.1.1      | HAVE_ALONE_FLEXIBLE_ARRAY<br>HAVE_ARRAY_EXTENT_CXX<br>HAVE_BUILTIN_CONSTANT_P_CXX<br>HAVE_STRANGE_BUILTIN_CONSTANT_P_CXX<br>HAVE_BUILTIN_TYPES_COMPATIBLE_P<br>HAVE_EMPTY_STRUCTURE<br>HAVE_IS_ARRAY_CXX<br>HAVE_IS_SAME_AS_CXX<br>HAVE_IS_SAME_CXX<br>HAVE_TYPEOF<br>`HAVE___TYPEOF__`<br>`HAVE___TYPEOF_UNQUAL__`<br>HAVE_VLA0<br>HAVE_VLA0_CXX<br>HAVE_VLA_CXX<br>HAVE_VLA_ZLA<br>HAVE_ZLA<br>HAVE_ZLA_EMPTY_INITIALIZER<br>HAVE_ZLA_EMPTY_INITIALIZER_CXX<br>HAVE_ZLA_ZLA |
| LCC       | 1.27.23           | HAVE_HIDDEN_BUILTIN_CONSTANT_P_CXX<br>HAVE_HIDDEN_BUILTIN_TYPES_COMPATIBLE_P<br>HAVE_BROKEN_BUILTIN_TYPES_COMPATIBLE_P<br>HAVE_EMPTY_STRUCTURE<br>HAVE_HIDDEN_IS_SAME_AS_CXX<br>HAVE_TYPEOF<br>`HAVE___TYPEOF__`<br>`HAVE_BROKEN___TYPEOF__`<br>HAVE_VLA0<br>HAVE_VLA0_CXX<br>HAVE_VLA_CXX<br>HAVE_VLA_ZLA<br>HAVE_ZLA<br>HAVE_ZLA_EMPTY_INITIALIZER<br>HAVE_ZLA_EMPTY_INITIALIZER_CXX<br>HAVE_ZLA_ZLA<br>NO_ERROR_ON_SIZEOF_POINTER_SUBTRACTION                                                               |               |                                                                                                                                                                                                                                                                                                                                                                                                                                                                               |
| MSVC      | 19.50.35721.0     | `HAVE___TYPEOF__`<br>`HAVE___TYPEOF_UNQUAL__`<br>`HAVE___STDC_NO_VLA__`<br>NO_ERROR_ON_SIZEOF_POINTER_SUBTRACTION<br>WARN_ERROR_ON_STRUCT_BIT_FIELD<br>WARN_ERROR_ON_STRUCT_STATIC_ASSERT                                                                                                                                                                                                                                                                                                                      | 19.44.35213.0 | `HAVE___TYPEOF__`<br>`HAVE___TYPEOF_UNQUAL__`<br>`HAVE___STDC_NO_VLA__`<br>NO_ERROR_ON_SIZEOF_POINTER_SUBTRACTION<br>WARN_ERROR_ON_STRUCT_BIT_FIELD<br>WARN_ERROR_ON_STRUCT_STATIC_ASSERT                                                                                                                                                                                                                                                                                     |
| NVHPC     | 25.9.0            | HAVE_BUILTIN_CONSTANT_P_CXX<br>HAVE_BUILTIN_TYPES_COMPATIBLE_P<br>HAVE_BROKEN_BUILTIN_TYPES_COMPATIBLE_P<br>HAVE_EMPTY_STRUCTURE<br>HAVE_IS_ARRAY_CXX<br>HAVE_IS_SAME_AS_CXX<br>HAVE_IS_SAME_CXX<br>HAVE_TYPEOF<br>`HAVE___TYPEOF__`<br>`HAVE_BROKEN___TYPEOF__`<br>HAVE_BROKEN_VLA<br>HAVE_VLA0<br>HAVE_VLA0_CXX<br>HAVE_VLA_CXX<br>HAVE_BROKEN_VLA_CXX<br>HAVE_VLA_ZLA<br>HAVE_ZLA<br>HAVE_ZLA_EMPTY_INITIALIZER<br>HAVE_ZLA_EMPTY_INITIALIZER_CXX<br>HAVE_ZLA_ZLA<br>NO_ERROR_ON_SIZEOF_POINTER_SUBTRACTION |               |                                                                                                                                                                                                                                                                                                                                                                                                                                                                               |
| Pelles    |                   |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                | 13.0          | HAVE_TYPEOF<br>`HAVE___TYPEOF__`<br>HAVE_BROKEN_VLA<br>HAVE_VLA0                                                                                                                                                                                                                                                                                                                                                                                                              |
| PGI       |                   |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                | ?19.10-0      | HAVE_BUILTIN_CONSTANT_P_CXX<br>HAVE_HIDDEN_BUILTIN_TYPES_COMPATIBLE_P<br>NO_ERROR_ON_SIZEOF_POINTER_SUBTRACTION                                                                                                                                                                                                                                                                                                                                                               |
| SunPro    | 5.15.0            | HAVE_ALONE_FLEXIBLE_ARRAY<br>HAVE_HIDDEN_BUILTIN_CONSTANT_P_CXX<br>HAVE_BROKEN_BUILTIN_CONSTANT_P_CXX<br>HAVE_EMPTY_STRUCTURE<br>HAVE_TYPEOF<br>`HAVE___TYPEOF__`<br>HAVE_VLA0<br>HAVE_VLA0_CXX<br>HAVE_VLA_CXX<br>HAVE_ZLA<br>HAVE_ZLA_EMPTY_INITIALIZER_CXX<br>NO_ERROR_ON_SIZEOF_POINTER_SUBTRACTION                                                                                                                                                                                                        |               |                                                                                                                                                                                                                                                                                                                                                                                                                                                                               |
<!-- endspan: "compiler-versions-and-extensions" -->
#### Описание расширений
<!-- span: "extensions" keys: "Extension" -->

| Extension                                                                                                                                                                                                                                                                                                                                                                                   | Language | Описание                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       |
| ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | -------- | -------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| [HAVE_ALONE_FLEXIBLE_ARRAY](../tests/autoconf/have_alone_flexible_array.c)                                                                                                                                                                                                                                                                                                                  | C/C++    | [Structures with only Flexible Array Members](https://gcc.gnu.org/onlinedocs/gcc/Flexible-Array-Members-alone-in-Structures.html)                                                                                                                                                                                                                                                                                                                                                                                                                                                                              |
| [HAVE_BUILTIN_CONSTANT_P_CXX](../tests/autoconf/have_builtin_constant_p_cxx.cpp)<br>[HAVE_HIDDEN_BUILTIN_CONSTANT_P_CXX](../tests/autoconf/have_hidden_builtin_constant_p_cxx.cpp)<br>[HAVE_BROKEN_BUILTIN_CONSTANT_P_CXX](../tests/autoconf/no_have_broken_builtin_constant_p_cxx.cpp)<br>[HAVE_STRANGE_BUILTIN_CONSTANT_P_CXX](../tests/autoconf/have_strange_builtin_constant_p_cxx.cpp) | C++      | [`__builtin_constant_p()`](https://gcc.gnu.org/onlinedocs/gcc/Other-Builtins.html#index-_005f_005fbuiltin_005fconstant_005fp), `*_HIDDEN_*` - в случае если компилятор не поддерживает её обнаружение с помощью [`__has_builtin()`](https://gcc.gnu.org/onlinedocs/cpp/_005f_005fhas_005fbuiltin.html);<br>`HAVE_BROKEN_BUILTIN_CONSTANT_P_CXX` - для SunPro `volatile size_t n = ...; static_assert(__builtin_constant_p(sizeof(int[n])));`<br>`HAVE_STRANGE_BUILTIN_CONSTANT_P_CXX` -  для Intel и IntelLLVM `static_assert(!__builtin_constant_p(sizeof(v))); assert(__builtin_constant_p(sizeof(v)));`<br> |
| [HAVE_BUILTIN_TYPES_COMPATIBLE_P](../tests/autoconf/have_builtin_types_compatible_p.c)<br>[HAVE_HIDDEN_BUILTIN_TYPES_COMPATIBLE_P](../tests/autoconf/have_hidden_builtin_types_compatible_p.c)<br>[HAVE_BROKEN_BUILTIN_TYPES_COMPATIBLE_P](../tests/autoconf/no_have_broken_builtin_types_compatible_p.c)<br>                                                                               | C        | [`__builtin_types_compatible_p()`](https://gcc.gnu.org/onlinedocs/gcc/Other-Builtins.html#index-_005f_005fbuiltin_005ftypes_005fcompatible_005fp), `HAVE_BROKEN_BUILTIN_TYPES_COMPATIBLE_P` - для Intel, LCC и NVHPC `static_assert(!__builtin_types_compatible_p(int (*)[d1], int (*)[d1]))`<br>                                                                                                                                                                                                                                                                                                              |
| [HAVE_COUNTOF](../tests/autoconf/have_countof.c)                                                                                                                                                                                                                                                                                                                                            | C        | [N3469, The Big Array Size Survey](https://www.open-std.org/JTC1/SC22/WG14/www/docs/n3469.htm), [n3369 - New `_Lengthof()` operator (v4)](https://www.open-std.org/JTC1/SC22/WG14/www/docs/n3369.pdf)                                                                                                                                                                                                                                                                                                                                                                                                          |
| [HAVE_EMPTY_STRUCTURE](../tests/autoconf/have_empty_structure.c)                                                                                                                                                                                                                                                                                                                            | C        | [Structures with No Members](https://gcc.gnu.org/onlinedocs/gcc/Empty-Structures.html)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         |
| [HAVE_IS_SAME_CXX](../tests/autoconf/have_is_same_cxx.cpp)<br>[HAVE_HIDDEN_IS_SAME_CXX](../tests/autoconf/have_hidden_is_same_cxx.cpp)<br>                                                                                                                                                                                                                                                  | C++      | [`__is_same()`](https://gcc.gnu.org/onlinedocs/gcc/Type-Traits.html)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           |
| [HAVE_TYPEOF](../tests/autoconf/have_typeof.c)<br>[`HAVE___TYPEOF__`](../tests/autoconf/have_broken___typeof__.c)<br>[`HAVE_BROKEN___TYPEOF__`](../tests/autoconf/have_broken___typeof__.c)<br>[`HAVE___TYPEOF_UNQUAL__`](../tests/autoconf/have___typeof_unqual__.c)<br>                                                                                                                   | C        | [`__typeof__()`](https://gcc.gnu.org/onlinedocs/gcc/Typeof.html), `HAVE_BROKEN___TYPEOF__` - для Intel, LCC и NVHPC `__typeof__() === typeof_unqual()`                                                                                                                                                                                                                                                                                                                                                                                                                                                         |
| [`HAVE___STDC_NO_VLA__`](../tests/autoconf/have___stdc_no_vla__.c)                                                                                                                                                                                                                                                                                                                          | C        | Нет поддержки VLA (известен только MSVC)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       |
| [HAVE_BROKEN_VLA](../tests/autoconf/no_have_broken_vla.c)                                                                                                                                                                                                                                                                                                                                   | C        | Не обеспечивается поддержка VLA в аргументах функций, в двухмерных массивах                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    |
| [HAVE_VLA0](../tests/autoconf/have_vla0.c)                                                                                                                                                                                                                                                                                                                                                  | С        | Допускается получение размера от VLA длины 0                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   |
| [HAVE_VLA0_CXX](../tests/autoconf/have_vla0_cxx.cpp)<br>[HAVE_VLA_CXX](../tests/autoconf/have_vla_cxx.cpp)<br>[HAVE_BROKEN_VLA_CXX](../tests/autoconf/no_have_broken_vla_cxx.cpp)                                                                                                                                                                                                           | С++      | Поддержка расширений VLA С++                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   |
| [HAVE_VLA_ZLA](../tests/autoconf/have_vla_zla.c)                                                                                                                                                                                                                                                                                                                                            | С/С++    | VLA может содержать ZLA                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        |
| [HAVE_ZLA](../tests/autoconf/have_zla.c)                                                                                                                                                                                                                                                                                                                                                    | С/С++    | [Zero-length arrays](https://gcc.gnu.org/onlinedocs/gcc/Zero-Length.html)(ZLA)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 |
| [HAVE_ZLA_EMPTY_INITIALIZER](../tests/autoconf/have_zla_empty_initializer.c)                                                                                                                                                                                                                                                                                                                | C        | [Zero-length arrays](https://gcc.gnu.org/onlinedocs/gcc/Zero-Length.html)(ZLA)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 |
| [HAVE_ZLA_EMPTY_INITIALIZER_CXX](../tests/autoconf/have_zla_empty_initializer_cxx.cpp)                                                                                                                                                                                                                                                                                                      | C++      | [Zero-length arrays](https://gcc.gnu.org/onlinedocs/gcc/Zero-Length.html)(ZLA)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 |
| [HAVE_ZLA_ZLA](../tests/autoconf/have_zla_zla.c)                                                                                                                                                                                                                                                                                                                                            | С/С++    | ZLA может быть элементом                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       |
| [WARN_ERROR_ON_STRUCT_BIT_FIELD](../tests/autoconf/error_on_struct_bit_field.c)<br>[WARN_ERROR_ON_STRUCT_STATIC_ASSERT](../tests/autoconf/error_on_struct_static_assert.c)                                                                                                                                                                                                                  | C        | Странное поведение MSVC в части предупреждения [C4116](https://learn.microsoft.com/en-us/cpp/error-messages/compiler-warnings/compiler-warning-level-1-c4116?view=msvc-180)                                                                                                                                                                                                                                                                                                                                                                                                                                    |
<!-- endspan: "extensions" -->
### Compiler ID
<!-- span: "compiler-id" keys: "ID", "CC", "CXX" -->

| ID        | CC    | CXX     | Description                                                                                               |
| --------- | ----- | ------- | --------------------------------------------------------------------------------------------------------- |
| Clang     | clang | clang++ | [LLVM Clang C/C++](https://clang.llvm.org/)                                                               |
| GNU       | gcc   | g++     | [GNU C/C++](https://gcc.gnu.org/)                                                                         |
| Intel     | icc   | icpc    | Intel Classic Compiler                                                                                    |
| IntelLLVM | icx   | icpx    | [Intel LLVM-Based Compiler](https://www.intel.com/content/www/us/en/developer/tools/oneapi/overview.html) |
| LCC       | lcc   | l++     | [MCST Elbrus C/C++/Fortran Compiler](https://dev.mcst.ru/download/)                                       |
| MSVC      | cl    | cl      | [Microsoft Visual Studio](https://visualstudio.microsoft.com/)                                            |
| NVHPC     | pgcc  | pgc++   | [NVIDIA HPC Compiler](https://developer.nvidia.com/hpc-compilers)                                         |
| Pelles    | pocc  |         | [Pelles C](http://www.smorgasbordet.com/pellesc/)                                                         |
| PGI       | pgcc  | pgc++   | The Portland Group                                                                                        |
| SunPro    | suncc | sunCC   | Oracle Developer Studio                                                                                   |
<!-- endspan: "compiler-id" -->
## Обсуждение

### Поддержка массивов и типов данных

- VLA - все, кроме MSVC (9 из 10), поддерживают VLA, как для C, так и для C++, причём отказов в части VLA длины 0 не замечено. Таким образом, хотя этот случай, по стандарту C, явно относится к UB, реализациям получения числа элементов массива стоит его предусматривать;
- ZLA (Zero Length Arrays)- 6 из 10, поддерживают ZLA, как для C, так и для C++;
- Объекты нулевого размера, кроме ZLA - 6 из 10 поддерживают какой-либо тип в языке C. Но такие расширения C++ встречаются реже - 3 из 10.
- NVHPC не имеет определения `__STDC_NO_VLA__` и, синтаксически, VLA массивы принимаются, но полностью корректно не работают. Одномерные VLA размерности 0  принимаются, многомерные - нет;
### Нарушение ограничений (вызов ошибки компиляции)

- В 5 из 10 случаев, нарушения ограничений C11 на вычитание указателей, по умолчанию, приводит лишь выдаче предупреждения;
- Можно так же отметить странное поведение MSVC в части предупреждения [C4116](https://learn.microsoft.com/en-us/cpp/error-messages/compiler-warnings/compiler-warning-level-1-c4116?view=msvc-180);
- У LCC нет управления предупреждениями (TODO: уточнить у производителя и сравнить с gcc-9).

Итого, без предупреждений и ошибок доступны:
- ERROR_ON_GENERIC;
- ERROR_ON_NEGATIVE_ARRAY_SIZE (возможно, в сочетании с `_Generic()`).

### Анализ типов и/или данных C

Реализация получения числа элементов массива, и в случае VLA, возможна в рамках стандарта C23 (или C11 с общепринятыми расширениями). Но она, обычно, зависит от флагов компилятора. Поэтому желательно иметь вариант реализации с использованием встроенной функции:  `__builtin_types_compatible_p()`.

`HAVE_BUILTIN_TYPES_COMPATIBLE_P` есть у 4 из 10 компиляторов, плюс у двух `__builtin_types_compatible_p()` есть, но они не поддерживают интерфейс `__has_builtin()`:
- Intel - простой случай сведения к настройке компилятора: `-diag-error=1121 "-D_countof_ns_ptr_compatible_type(p,t)=(0==0*sizeof((p)-(t)(p)))"`;
- LCC - с настройкой компилятора есть проблемы, встроенная функция `__builtin_types_compatible_p()` имеет ограничения, так что: `-D_countof_ns_ptr_compatible_type(ppa,t)=(!__builtin_types_compatible_p(__typeof__(&*(**(ppa))), __typeof__(**(ppa))))` (несколько ограниченный, но рабочий вариант);
- MSVC - нет VLA, нет проблем, достаточно стандартного `_Generic()`;
- NVHPC (TODO: непонятно);
- PellesC - простая замена на вычитание должна работать неплохо, но пока тестирование PellesC фрагментарно;
- PGI (TODO: непонятно);
- SunPro - простой случай сведения к настройке компилятора: `-errwarn=E_BAD_POINTER_SUBTRACTION "-D_countof_ns_ptr_compatible_type(p,t)=(0==0*sizeof((p)-(t)(p)))"`;

### Анализ типов и/или данных C++

Как я понимаю (TODO), в случае VLA реализация получения числа элементов массива невозможна на чистом C++, требуются встроенные функции `__builtin_constant_p()` и `__is_same()`.

`__builtin_constant_p()` поддерживают все C++ компиляторы, которые поддерживают VLA (8 из 9, все, кроме MSVC). С поддержкой `__is_same()` немного хуже - 6 из 9:
- MSVC - нет VLA, нет проблем, достаточно обычных шаблонов;
- PGI (TODO: непонятно);
- SunPro - поскольку имеет самые либеральные ограничения реализации VLA, вероятно можно реализовать вычитанием указателей.
